<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>KT ê³µì‹ ì¸ì¦ ëŒ€ë¦¬ì  íŠ¹ê°€ëª°</title>

    <meta name="naver-site-verification" content="b4b6f91c837c5946c62c9937cf39b17f80178fb3" />

    <meta name="description" content="KT ê³µì‹ ì˜¨ë¼ì¸ ëŒ€ë¦¬ì  ê°€ìš°ë¦¬ì—”í„°í”„ë¼ì´ì¦ˆ íŠ¹ê°€ëª°ì…ë‹ˆë‹¤. ê°¤ëŸ­ì‹œ S25, ì•„ì´í°17 ë“± ìµœì‹  ìŠ¤ë§ˆíŠ¸í° ìµœì €ê°€ ìƒë‹´ ë° ì¸í„°ë„·+TV ê²°í•©í• ì¸ í˜œíƒì„ ë§Œë‚˜ë³´ì„¸ìš”.">
    <meta name="keywords" content="KTëŒ€ë¦¬ì , KTì˜¨ë¼ì¸ìƒµ, í•¸ë“œí°ì„±ì§€, ê°¤ëŸ­ì‹œS25, ì•„ì´í°17, ì¸í„°ë„·ê°€ì…, ê°€ìš°ë¦¬ì—”í„°í”„ë¼ì´ì¦ˆ">
     
    <meta property="og:type" content="website">
    <meta property="og:title" content="KT ê³µì‹ ì¸ì¦ ëŒ€ë¦¬ì  íŠ¹ê°€ëª°">
    <meta property="og:description" content="ìµœì‹ í° íŠ¹ê°€, ì¸í„°ë„·+TV ìµœëŒ€ í˜œíƒ! ê³µì‹ ì¸ì¦ ëŒ€ë¦¬ì ì—ì„œ ì•ˆì „í•˜ê²Œ ìƒë‹´ë°›ìœ¼ì„¸ìš”.">
    <meta property="og:image" content="https://i.ibb.co/LDYWCm5t/lgo.jpg">
    <meta property="og:url" content="https://ktmallstore.co.kr/">

    <script async src="https://www.googletagmanager.com/gtag/js?id=AW-17795387426"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'AW-17795387426');
    </script>
     
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
     
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
     
    <script src="https://cdn.tailwindcss.com"></script>

    <script>
        tailwind.config = {
            theme: {
                extend: {
                    keyframes: {
                        fadeIn: { '0%': { opacity: '0' }, '100%': { opacity: '1' } },
                        fadeInUp: { '0%': { opacity: '0', transform: 'translateY(20px)' }, '100%': { opacity: '1', transform: 'translateY(0)' } },
                        scaleUp: { '0%': { opacity: '0', transform: 'scale(0.95)' }, '100%': { opacity: '1', transform: 'scale(1)' } }
                    },
                    animation: {
                        'fade-in': 'fadeIn 0.5s ease-out',
                        'fade-in-up': 'fadeInUp 0.6s ease-out forwards',
                        'scale-up': 'scaleUp 0.3s ease-out forwards',
                    }
                }
            }
        }
    </script>

    <style>
        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: #f1f1f1; }
        ::-webkit-scrollbar-thumb { background: #888; border-radius: 4px; }
        ::-webkit-scrollbar-thumb:hover { background: #555; }
        .scrollbar-hide::-webkit-scrollbar { display: none; }
        .scrollbar-hide { -ms-overflow-style: none; scrollbar-width: none; }
        body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif; }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useMemo } = React;

        // ì—°ë½ì²˜ ìë™ í•˜ì´í”ˆ í•¨ìˆ˜
        const formatPhoneNumber = (value) => {
            const cleanNum = value.replace(/[^0-9]/g, '');
            if (cleanNum.length <= 3) return cleanNum;
            if (cleanNum.length <= 7) return `${cleanNum.slice(0, 3)}-${cleanNum.slice(3)}`;
            return `${cleanNum.slice(0, 3)}-${cleanNum.slice(3, 7)}-${cleanNum.slice(7, 11)}`;
        };

        /* ================================================================
           [ê´€ë¦¬ì ì„¤ì • ì˜ì—­]
           ================================================================
        */
        const SITE_CONFIG = {
          // [ê³µì§€ì‚¬í•­ íŒì—…] ê¸°ê°„ ì„¤ì • ê°€ëŠ¥
          noticePopup: {
            isActive: true, // true: ì‚¬ìš©í•¨, false: ì‚¬ìš©ì•ˆí•¨
            startDate: "2026-01-04", // ì‹œì‘ì¼ (YYYY-MM-DD)
            endDate: "2026-01-08",   // ì¢…ë£Œì¼ (YYYY-MM-DD)
            title: "ğŸ””ê³µì§€",
            content: `ì´ë©”ì¼ ì ‘ìˆ˜ ì‹œìŠ¤í…œ ì˜¤ë¥˜ë¡œ ì¸í•´<br/>í˜„ì¬ <strong>ì¹´ì¹´ì˜¤í†¡ ì ‘ìˆ˜ë§Œ ê°€ëŠ¥</strong>í•©ë‹ˆë‹¤.<br/><br/>ë¹ ë¥¸ ì‹œì¼ ì•ˆì— ë³µêµ¬í•˜ê² ìŠµë‹ˆë‹¤.<br/><br/>ìµœê·¼ ì´ë©”ì¼ë¡œ ì ‘ìˆ˜í•˜ì‹  ê³ ê°ë‹˜ê»˜ì„œëŠ”<br/>ë²ˆê±°ë¡œìš°ì‹œë”ë¼ë„ <span class="text-red-600 font-bold">ì¹´ì¹´ì˜¤í†¡ìœ¼ë¡œ ì¬ì ‘ìˆ˜</span> ë¶€íƒë“œë¦½ë‹ˆë‹¤.`,
            btnText: "í™•ì¸í–ˆìŠµë‹ˆë‹¤"
          },
          info: {
            logoImg: "https://i.ibb.co/LDYWCm5t/lgo.jpg",
            phone: "010-2141-0137",
            kakaoUrl: "http://pf.kakao.com/_xjVcQn/chat",
            promotionText: "ê°€ì „êµ¬ë… í”„ë¡œëª¨ì…˜ í˜œíƒìƒë‹´ (ì„ íƒì‚¬í•­)",
            topBannerText: "ê³µì‹ ì˜¨ë¼ì¸ ëŒ€ë¦¬ì  ì¸ì¦",
            mainPriceLabel: "ì‹¤êµ¬ë§¤ê°€",
            ktCertImg: "https://i.ibb.co/S708ZYmS/gauri.png",
            ftcLogo: "https://i.ibb.co/21jL6FJj/gongjung.png",
            ftcLink: "https://www.ftc.go.kr/www/index.do",
            companyName: "(ì£¼)KT ê°€ìš°ë¦¬ì—”í„°í”„ë¼ì´ì¦ˆ",
            representative: "í˜„ì¬í›ˆ",
            businessNumber: "876-88-01684",
            address: "ëŒ€ì „ê´‘ì—­ì‹œ ë™êµ¬ ë™ì„œëŒ€ë¡œ 1679, 106í˜¸",
            telecomNumber: "2025-ëŒ€ì „ë™êµ¬-0571",
            privacyManager: "ë°•ë²”í›ˆ",
            kaitLogoHtml: `<img src="https://ictmarket.or.kr:8443/getCertIcon.do?cert_icon=AGT0000225826FA00331" style="cursor: pointer; height: 48px;" onclick="window.open('https://ictmarket.or.kr:8443/agent/pop_AgentCertIcon.do?AGENT_REQ_ID=AGT0000225826&AGENT_CD=FA00331','_blank','width=600, height=400, toolbar=no, menubar=no, scrollbars=no, resizable=no' )"/>` 
          },
          mainPopup: {
            isActive: true,
            badge: "ê³µì‹ ì˜¨ë¼ì¸ ëŒ€ë¦¬ì  ì¸ì¦",
            title: "KTê³µì‹ ì¸ì¦ ëŒ€ë¦¬ì  íŠ¹ê°€ëª°",
            btnText: "í˜œíƒ ìì„¸íˆ ë³´ê¸°"
          },
          options: {
             insurance: [
                { name: 'ë¯¸ê°€ì…', price: 0 },
                { name: 'íŒŒì†í˜• ê°€ì…', price: 5900 }, 
                { name: 'ì¼ë°˜(ë¶„ì‹¤í¬í•¨) ê°€ì…', price: 6500 } 
             ],
             cards: [
                { name: 'ë¯¸ì‹ ì²­', discount: 0 },
                { name: 'ìš°ë¦¬ì¹´ë“œ (ì „ì›” 40ë§Œì› / 25,000ì› í• ì¸) - 6ê°œì›” ë¬´ì‹¤ì ', discount: 25000 },
                { name: 'ì‹ í•œì¹´ë“œ (ì „ì›” 30ë§Œì› / 21,000ì› í• ì¸) - 6ê°œì›” ë¬´ì‹¤ì ', discount: 21000 },
                { name: 'êµ­ë¯¼ì¹´ë“œ (ì „ì›” 30ë§Œì› / 21,000ì› í• ì¸) - 6ê°œì›” ë¬´ì‹¤ì ', discount: 21000 },
                { name: 'ì‚¼ì„±ì¹´ë“œ (ì „ì›” 30ë§Œì› / 20,000ì› í• ì¸) - 6ê°œì›” ë¬´ì‹¤ì ', discount: 20000 },
                { name: 'í˜„ëŒ€ì¹´ë“œ (ì „ì›” 50ë§Œì› / 26,000ì› í• ì¸) - 6ê°œì›” ë¬´ì‹¤ì ', discount: 26000 },
                { name: 'ë¡¯ë°ì¹´ë“œ (ì „ì›” 30ë§Œì› / 22,000ì› í• ì¸) - 6ê°œì›” ë¬´ì‹¤ì ', discount: 22000 }
             ],
             packs: [
                { name: 'ë¯¸ê°€ì…', price: 0 },
                { name: 'ê°€ì…', price: 0 } 
             ],
             combinations: [
                { name: 'ë¯¸ê²°í•©', discount: 0, type: 'fixed' },
                { name: 'í”„ë¦¬ë¯¸ì—„ ì‹±ê¸€ê²°í•© (25% ìš”ê¸ˆí• ì¸)', discount: 0.25, type: 'percent' },
                { name: 'í”„ë¦¬ë¯¸ì—„ ê°€ì¡±ê²°í•© (25% ìš”ê¸ˆí• ì¸)', discount: 0.25, type: 'percent' },
                { name: 'ì´ì•¡ ê²°í•©í• ì¸ (ê¸°ì—¬ë„ë³„ ìƒì´)', discount: 0, type: 'total' }, // ê¸°ì—¬ë„ë³„ ê³„ì‚° ë¡œì§ ì‚¬ìš©
                { name: 'ìš°ë¦¬ê°€ì¡± ë¬´ì„ ê²°í•©', discount: 3300, type: 'fixed' } 
             ]
          },
          banner: {
            // [ë©”ì¸ ë°°ë„ˆ ì„¤ì •] isActive: falseë¡œ ë³€ê²½í•˜ë©´ í•´ë‹¹ ë°°ë„ˆëŠ” ë³´ì´ì§€ ì•ŠìŠµë‹ˆë‹¤.
            images: [
              { isActive: true, pcImg: "https://i.ibb.co/cSfpwWpK/pc1.jpg", mobileImg: "https://i.ibb.co/R4SBrLBc/m1.jpg" },
              { isActive: true, pcImg: "https://i.ibb.co/wFXxR6mT/pc2.jpg", mobileImg: "https://i.ibb.co/Z6r6VZz3/m2.png" },
              { isActive: true, pcImg: "https://i.ibb.co/WWHNJMZV/pc3.jpg", mobileImg: "https://i.ibb.co/h1Mb2bCh/m3.png" },
              { isActive: true, pcImg: "https://i.ibb.co/hJkssTg7/pc4.jpg", mobileImg: "https://i.ibb.co/C3CHzKxk/m4.jpg" },
              { isActive: true, pcImg: "https://i.ibb.co/XfbqhSHr/pc5.jpg", mobileImg: "https://i.ibb.co/bgpnW45F/m5.png" }
            ]
          },
          preOrder: {
            isActive: true,
            badge: "COMING SOON",
            title: "ì‚¬ì „ì˜ˆì•½ ì¤€ë¹„ì¤‘",
            description: "ì¶œì‹œ ì˜ˆì •ì¸ ìµœì‹  ëª¨ë¸ì„ ê°€ì¥ ë¨¼ì € ë§Œë‚˜ë³´ì„¸ìš”.<br/>ì•Œë¦¼ ì‹ ì²­ì„ í•˜ì‹œë©´ ì˜¤í”ˆ ì¦‰ì‹œ ë¬¸ìë¡œ ì•Œë ¤ë“œë¦½ë‹ˆë‹¤.",
            models: ['Galaxy S26 Ultra', 'Galaxy S26', 'Z Fold 8', 'Z Flip 8']
          },
           
          specialProducts: [
            // 1. ì•„ì´í° 17 ê¸°ë³¸í˜•
            { 
              id: 'ip17', 
              category: 'APPLE', 
              name: 'ì•„ì´í° 17 ê¸°ë³¸í˜•', 
              img: 'https://i.ibb.co/23w8Wch4/aip17.png', 
              tag: 'ì‹ ìƒ íŠ¹ê°€', 
              isHot: true, 
              capacity: ['256GB', '512GB'], 
              prices: { '256GB': 1287000, '512GB': 1584000 }, 
              colors: [
                {name:'ë¼ë²¤ë”', code:'#E6E6FA'}, 
                {name:'ì„¸ì´ì§€', code:'#9C9F84'}, 
                {name:'ë¸”ë™', code:'#000000'}, 
                {name:'í™”ì´íŠ¸', code:'#F5F5F5'}, 
                {name:'ë¸”ë£¨', code:'#A7C7E7'}
              ], 
              mandatoryPlan: 'ì´ˆì´ìŠ¤ ë² ì´ì§(9ë§Œ)', 
              publicSupport: 550000, 
              addSupport: 200000 
            },
             
            // 2. ì•„ì´í° 17 AIR
            { 
              id: 'ip17air', 
              category: 'APPLE', 
              name: 'ì•„ì´í° 17 AIR', 
              img: 'https://i.ibb.co/2TrS7Gd/aipairnk.png', 
              tag: 'ì´ˆìŠ¬ë¦¼ ë””ìì¸', 
              isHot: true, 
              capacity: ['256GB', '512GB'], 
              prices: { '256GB': 1584000, '512GB': 1881000 }, 
              colors: [
                {name:'ë¸”ë£¨', code:'#A7C7E7'}, 
                {name:'ê³¨ë“œ', code:'#E5D0AC'}, 
                {name:'í™”ì´íŠ¸', code:'#F5F5F5'}, 
                {name:'ë¸”ë™', code:'#000000'}
              ], 
              mandatoryPlan: 'ì´ˆì´ìŠ¤ ë² ì´ì§(9ë§Œ)', 
              publicSupport: 550000, 
              addSupport: 200000 
            },

            // 3. ì•„ì´í° 17 PRO
            { 
              id: 'ip17pro', 
              category: 'APPLE', 
              name: 'ì•„ì´í° 17 PRO', 
              img: 'https://i.ibb.co/fVGqkF58/aip17pnk.png', 
              tag: 'ê°•í™”ë°”ë””', 
              isHot: true, 
              capacity: ['256GB', '512GB'], 
              prices: { '256GB': 1782000, '512GB': 2090000 }, 
              colors: [
                {name:'ì‹¤ë²„', code:'#C0C0C0'}, 
                {name:'ë¸”ë£¨', code:'#4B6EAF'}, 
                {name:'ì˜¤ë Œì§€', code:'#FF8C00'}
              ], 
              mandatoryPlan: 'ì´ˆì´ìŠ¤ ë² ì´ì§(9ë§Œ)', 
              publicSupport: 550000, 
              addSupport: 200000 
            },

            // 4. ì•„ì´í° 17 PRO MAX
            { 
              id: 'ip17promax', 
              category: 'APPLE', 
              name: 'ì•„ì´í° 17 PRO MAX', 
              img: 'https://i.ibb.co/QjNcQv1r/aip17pmnk.png', 
              tag: 'ëŒ€í™”ë©´', 
              isHot: true, 
              capacity: ['256GB', '512GB'], 
              prices: { '256GB': 1980000, '512GB': 2288000 }, 
              colors: [
                {name:'ì‹¤ë²„', code:'#C0C0C0'}, 
                {name:'ë¸”ë£¨', code:'#4B6EAF'}, 
                {name:'ì˜¤ë Œì§€', code:'#FF8C00'}
              ], 
              mandatoryPlan: 'ì´ˆì´ìŠ¤ ë² ì´ì§(9ë§Œ)', 
              publicSupport: 201000, 
              addSupport: 200000 
            },

            // 5. ê°¤ëŸ­ì‹œ S25
            { 
              id: 's25', 
              category: 'SAMSUNG', 
              name: 'ê°¤ëŸ­ì‹œ S25', 
              img: 'https://i.ibb.co/6cTRN0Fs/s931n.png', 
              tag: 'AIí°ì˜ ì •ì„', 
              isHot: true, 
              capacity: ['256GB', '512GB'], 
              prices: { '256GB': 1155000, '512GB': 1298000 }, 
              colors: [
                {name:'ì‹¤ë²„ì‰ë„ìš°', code:'#B0B3B8'}, 
                {name:'ì•„ì´ìŠ¤ë¸”ë£¨', code:'#A0D3E8'}, 
                {name:'ë„¤ì´ë¹„', code:'#000080'}, 
                {name:'ë¯¼íŠ¸', code:'#98FF98'}
              ], 
              mandatoryPlan: 'ì´ˆì´ìŠ¤ ë² ì´ì§(9ë§Œ)', 
              publicSupport: 600000, 
              addSupport: 350000 
            },

            // 6. ê°¤ëŸ­ì‹œ Z Flip 7
            { 
              id: 'zflip7', 
              category: 'SAMSUNG', 
              name: 'ê°¤ëŸ­ì‹œ Z Flip 7', 
              img: 'https://i.ibb.co/qMBthvT6/f766n.png', 
              tag: 'í”Œë¦½í° ëŒ€ì„¸', 
              isHot: true, 
              capacity: ['256GB', '512GB'], 
              prices: { '256GB': 1485000, '512GB': 1643400 }, 
              colors: [
                {name:'ë¸”ë£¨ì‰ë„ìš°', code:'#5D76A9'}, 
                {name:'ì½”ë„ë ˆë“œ', code:'#FF6F61'}, 
                {name:'ì œíŠ¸ë¸”ë™', code:'#0A0A0A'}
              ], 
              mandatoryPlan: 'ì´ˆì´ìŠ¤ ë² ì´ì§(9ë§Œ)', 
              publicSupport: 600000, 
              addSupport: 350000 
            },

            // 7. ê°¤ëŸ­ì‹œ Z Fold 7
            { 
              id: 'zfold7', 
              category: 'SAMSUNG', 
              name: 'ê°¤ëŸ­ì‹œ Z Fold 7', 
              img: 'https://i.ibb.co/7tqtN4GQ/f966n.png', 
              tag: 'ë©€í‹°íƒœìŠ¤í‚¹', 
              isHot: false, 
              capacity: ['256GB', '512GB'], 
              prices: { '256GB': 2379300, '512GB': 2537700 }, 
              colors: [
                {name:'ë¸”ë£¨ì‰ë„ìš°', code:'#5D76A9'}, 
                {name:'ì‹¤ë²„ì‰ë„ìš°', code:'#B0B3B8'}, 
                {name:'ì œíŠ¸ë¸”ë™', code:'#0A0A0A'}
              ], 
              mandatoryPlan: 'ì´ˆì´ìŠ¤ ë² ì´ì§(9ë§Œ)', 
              publicSupport: 600000, 
              addSupport: 350000 
            },

            // 8. ê°¤ëŸ­ì‹œ Jump 4
            { 
              id: 'jump4', 
              category: 'SAMSUNG', 
              name: 'ê°¤ëŸ­ì‹œ Jump 4', 
              img: 'https://i.ibb.co/mFJ7mmbq/zump4.png', 
              tag: 'ê°€ì„±ë¹„ ì¶”ì²œ', 
              isHot: false, 
              capacity: ['128GB'], 
              prices: { '128GB': 449900 }, 
              colors: [
                {name:'ë¸”ë™', code:'#000000'}, 
                {name:'ë¼ì´íŠ¸ê·¸ë¦°', code:'#90EE90'}
              ], 
              mandatoryPlan: 'ì‹¬í”Œ(6.1ë§Œ)', 
              publicSupport: 392000, 
              addSupport: 86900 
            },

            // 9. ê°¤ëŸ­ì‹œ A17
            { 
              id: 'a17', 
              category: 'SAMSUNG', 
              name: 'ê°¤ëŸ­ì‹œ A17 (LTE)', 
              img: 'https://i.ibb.co/JRgsCsNG/a175nk.png', 
              tag: 'íš¨ë„í°/í•™ìƒí°', 
              isHot: false, 
              capacity: ['128GB'], 
              prices: { '128GB': 319000 }, 
              colors: [
                {name:'ë¸”ë™', code:'#000000'}, 
                {name:'ê·¸ë ˆì´', code:'#808080'}, 
                {name:'ë¼ì´íŠ¸ë¸”ë£¨', code:'#ADD8E6'}
              ], 
              mandatoryPlan: 'LTE 3.7ë§Œ(ì‹ ê·œ)', 
              publicSupport: 278000, 
              addSupport: 108000 
            }
          ],
           
          internet: {
            cards: [
              { id: 'plan1', name: "ì§€ë‹ˆ TV ë² ì´ì§", desc: "230ì—¬ê°œ ì±„ë„", badge: "" },
              { id: 'plan2', name: "ì§€ë‹ˆ TV ëª¨ë“ G", desc: "250ì—¬ê°œ ì±„ë„+VOD", badge: "ê°•ë ¥ì¶”ì²œ" },
              { id: 'plan3', name: "ì§€ë‹ˆ TV ë””ì¦ˆë‹ˆ+", desc: "ë””ì¦ˆë‹ˆ+ OTT ê²°í•©", badge: "" }
            ],
            prices: {
              '100M': { 
                  'genieA': { plan1: ['37,400ì›','31,900ì›'], plan2: ['42,900ì›','37,400ì›'], plan3: ['45,200ì›','39,700ì›'] },
                  'genie3A': { plan1: ['38,500ì›','33,000ì›'], plan2: ['44,000ì›','38,500ì›'], plan3: ['46,300ì›','40,800ì›'] },
                  'genie4': { plan1: ['40,700ì›','35,200ì›'], plan2: ['46,200ì›','40,700ì›'], plan3: ['48,500ì›','43,000ì›'] },
                  'sound': { plan1: ['42,900ì›','37,400ì›'], plan2: ['46,200ì›','40,700ì›'], plan3: ['48,500ì›','43,000ì›'] }
              },
              '500M': { 
                  'genieA': { plan1: ['42,900ì›','37,400ì›'], plan2: ['48,400ì›','42,900ì›'], plan3: ['50,700ì›','45,200ì›'] },
                  'genie3A': { plan1: ['44,000ì›','38,500ì›'], plan2: ['49,500ì›','44,000ì›'], plan3: ['51,800ì›','46,300ì›'] },
                  'genie4': { plan1: ['46,200ì›','40,700ì›'], plan2: ['51,700ì›','46,200ì›'], plan3: ['54,000ì›','48,500ì›'] },
                  'sound': { plan1: ['48,400ì›','42,900ì›'], plan2: ['51,700ì›','46,200ì›'], plan3: ['54,000ì›','48,500ì›'] }
              },
              '1G': { 
                  'genieA': { plan1: ['48,400ì›','42,900ì›'], plan2: ['53,900ì›','48,400ì›'], plan3: ['56,200ì›','50,700ì›'] },
                  'genie3A': { plan1: ['49,500ì›','44,000ì›'], plan2: ['55,000ì›','49,500ì›'], plan3: ['57,300ì›','51,800ì›'] },
                  'genie4': { plan1: ['51,700ì›','46,200ì›'], plan2: ['57,200ì›','51,700ì›'], plan3: ['59,500ì›','54,000ì›'] },
                  'sound': { plan1: ['53,900ì›','48,400ì›'], plan2: ['57,200ì›','51,700ì›'], plan3: ['59,500ì›','54,000ì›'] }
              }
            }
          },
          // ì‹¤ì‹œê°„ ê³ ê° í›„ê¸° (ê´€ë¦¬ì ì„¤ì •)
          reviews: [
            { id: 1, user: 'ê¹€*ìˆ˜', device: 'ê°¤ëŸ­ì‹œ S25', rating: 5, content: 'ì‹ ì œí’ˆ ì‚¬ì „ì˜ˆì•½ìœ¼ë¡œ ë¹ ë¥´ê²Œ ë°›ì•˜ìŠµë‹ˆë‹¤. ìƒë‹´ë„ ì¹œì ˆí•˜ê³  ì‚¬ì€í’ˆë„ ì±™ê²¨ì£¼ì…”ì„œ ê°ì‚¬í•©ë‹ˆë‹¤!', date: '2025.03.15', img: 'https://i.ibb.co/Y4Tt24rV/re-s831.jpg' },
            { id: 2, user: 'ì´*ì˜', device: 'ì•„ì´í° 17 PRO', rating: 5, content: 'ë‹¤ë¥¸ ê³³ë³´ë‹¤ ì§€ì›ê¸ˆì´ í™•ì‹¤íˆ ë§ë„¤ìš”. í‹°íƒ€ëŠ„ ì»¬ëŸ¬ ë„ˆë¬´ ì˜ˆì©ë‹ˆë‹¤.', date: '2025.10.14', img: '' },
            { id: 3, user: 'ë°•*ë¯¼', device: 'ê°¤ëŸ­ì‹œ Jump 4', rating: 4, content: 'í•™ìƒ í°ìœ¼ë¡œ ê°€ì„±ë¹„ ìµœê³ ë„¤ìš”. ìš”ê¸ˆì œë„ ì €ë ´í•˜ê²Œ ì˜ ë§ì·„ìŠµë‹ˆë‹¤.', date: '2025.09.12', img: 'https://i.ibb.co/3mgQrgMp/re-m366.jpg' },
            { id: 4, user: 'ìµœ*í˜¸', device: 'Z Flip 7', rating: 5, content: 'ë””ìì¸ì´ ë„ˆë¬´ ì˜ˆë»ìš”. ë°°ì†¡ë„ í•˜ë£¨ë§Œì— ì™”ìŠµë‹ˆë‹¤.', date: '2025.09.11', img: 'https://i.ibb.co/FL8xTVtW/re-f766.jpg' },
            { id: 5, user: 'ì •*ì•„', device: 'ì¸í„°ë„·+TV', rating: 5, content: 'ê²°í•©í• ì¸ ë°›ì•„ì„œ í†µì‹ ë¹„ê°€ ë§ì´ ì¤„ì—ˆì–´ìš”.', date: '2025.03.10', img: '' },
            { id: 6, user: 'ê°•*ìš°', device: 'ì•„ì´í° 17', rating: 4, content: 'ìƒë‹´ì›ì´ ì¹œì ˆí•˜ê²Œ ì„¤ëª…í•´ì£¼ì…”ì„œ ì¢‹ì•˜ìŠµë‹ˆë‹¤.', date: '2025.10.09', img: '' },
            { id: 7, user: 'ì¡°*í˜„', device: 'ê°¤ëŸ­ì‹œ S25', rating: 5, content: 'ì—­ì‹œ í™”ë©´ì´ ì‹œì›ì‹œì›í•˜ë„¤ìš”. ëŒ€ë§Œì¡±ì…ë‹ˆë‹¤.', date: '2025.03.08', img: 'https://i.ibb.co/6cTRN0Fs/s931n.png' },
            { id: 8, user: 'ìœ¤*ë¹„', device: 'Z Fold 7', rating: 5, content: 'ì—…ë¬´ìš©ìœ¼ë¡œ ìƒ€ëŠ”ë° ë©€í‹°íƒœìŠ¤í‚¹ì´ í¸í•´ìš”.', date: '2025.09.28', img: 'https://i.ibb.co/m5VsfLDR/re-f966.jpg' },
            { id: 9, user: 'ì¥*ì„', device: 'ê°¤ëŸ­ì‹œ A17', rating: 4, content: 'ë¶€ëª¨ë‹˜ íš¨ë„í°ìœ¼ë¡œ í•´ë“œë ¸ëŠ”ë° ì¢‹ì•„í•˜ì‹œë„¤ìš”.', date: '2025.11.06', img: '' },
            { id: 10, user: 'ì„*í¬', device: 'ì•„ì´í° 17 AIR', rating: 5, content: 'ê°€ë³ê³  ì–‡ì•„ì„œ ë“¤ê³  ë‹¤ë‹ˆê¸° í¸í•´ìš”.', date: '2025.11.05', img: '' },
            { id: 11, user: 'í•œ*ë¯¼', device: 'ì•„ì´í° 17 PRO MAX', rating: 5, content: 'í™”ë©´ í¬ê³  ë°°í„°ë¦¬ ì˜¤ë˜ê°€ì„œ ë„ˆë¬´ ì¢‹ì•„ìš”.', date: '2025.11.04', img: 'https://i.ibb.co/C5xdBFmh/re-aip17pm.jpg' },
            { id: 12, user: 'ì˜¤*ì§„', device: 'ê°¤ëŸ­ì‹œ S25', rating: 5, content: 'ìƒ‰ìƒì´ ì‹¤ë¬¼ì´ í›¨ì”¬ ê¹¡íŒ¨ë„¤ìš”.', date: '2025.05.03', img: '' },
            { id: 13, user: 'ì‹ *ìš°', device: 'Z Flip 7', rating: 4, content: 'ì ‘íˆëŠ”ê²Œ ì‹ ê¸°í•˜ê³  í¸í•´ìš”. ì£¼ë¦„ë„ ë§ì´ ê°œì„ ë˜ì—ˆë„¤ìš”.', date: '2025.10.02', img: '' },
            { id: 14, user: 'ì¥*ë¼', device: 'Z Flip 7', rating: 4, content: 'ì ‘íˆëŠ”ê²Œ ì‹ ê¸°í•˜ê³  í¸í•˜ë‹¤ë©° ì‹ ê¸°í•´í•˜ë˜ ê³ ê°ë‹˜ì´ì‹ ë° "ë„ˆë¬´ ì¹œì ˆí•˜ê³  ê¼¼ê¼¼í•˜ê²Œ ì˜í•´ì£¼ì…”ì„œ ê³ ë§™ë‹¤ë©°" ì£¼ì‹  ê°„ì‹', date: '2025.12.26', img: 'https://i.ibb.co/8nQbs4Yj/review01.jpg' }
          ]
        };

        const PLANS = [
          { id: 1, name: 'ì´ˆì´ìŠ¤ ìŠ¤í˜ì…œ', price: 110000, data: 'ì™„ì „ë¬´ì œí•œ+VVIP' },
          { id: 2, name: 'ì´ˆì´ìŠ¤ ë² ì´ì§', price: 90000, data: 'ì™„ì „ë¬´ì œí•œ' },
          { id: 3, name: 'ì‹¬í”Œ', price: 61000, data: '30GB+5Mbps' },
          { id: 4, name: 'ì‹œë‹ˆì–´ ë² ì´ì§', price: 49000, data: '15GB+1Mbps' }, 
          { id: 5, name: 'Yí‹´', price: 48000, data: '10GB+1Mbps' },
          { id: 6, name: 'LTE ë² ì´ì§', price: 37000, data: '2GB' },
        ];

        // [ICONS]
        const IconChevronRight = ({ className, size=24 }) => (
          <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><polyline points="9 18 15 12 9 6"/></svg>
        );
        const IconStar = ({ className, size=24, fill="none" }) => (
          <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill={fill} stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"/></svg>
        );
        const IconMenu = ({ className, size=24 }) => (
          <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><line x1="4" x2="20" y1="12" y2="12"/><line x1="4" x2="20" y1="6" y2="6"/><line x1="4" x2="20" y1="18" y2="18"/></svg>
        );
        const IconSearch = ({ className, size=24 }) => (
          <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><circle cx="11" cy="11" r="8"/><line x1="21" x2="16.65" y1="21" y2="16.65"/></svg>
        );
        const IconArrowLeft = ({ className, size=24 }) => (
          <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><line x1="19" x2="5" y1="12" y2="12"/><polyline points="12 19 5 12 12 5"/></svg>
        );
        const IconX = ({ className, size=24 }) => (
          <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M18 6 6 18"/><path d="M6 6 18 18"/></svg>
        );
        const IconTruck = ({ className, size=24 }) => (
          <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><rect width="1" height="1" x="1" y="1" fillOpacity="0"/><rect x="1" y="3" width="15" height="13" rx="2" ry="2"/><polygon points="16 8 20 8 23 11 23 16 16 16 16 8"/><circle cx="5.5" cy="18.5" r="2.5"/><circle cx="18.5" cy="18.5" r="2.5"/></svg>
        );
        const IconPhone = ({ className, size=24 }) => (
          <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"/></svg>
        );
        const IconMessage = ({ className, size=24 }) => (
          <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M7.9 20A9 9 0 1 0 4 16.1L2 22Z"/></svg>
        );
        const IconMonitor = ({ className, size=24 }) => (
          <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><rect width="20" height="14" x="2" y="3" rx="2" ry="2"/><line x1="8" x2="16" y1="21" y2="21"/><line x1="12" x2="12" y1="17" y2="21"/></svg>
        );
        const IconWifi = ({ className, size=24 }) => (
          <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M5 12.55a11 11 0 0 1 14.08 0"/><path d="M1.42 9a16 16 0 0 1 21.16 0"/><path d="M8.53 16.11a6 6 0 0 1 6.95 0"/><line x1="12" x2="12.01" y1="20" y2="20"/></svg>
        );
        const IconSmartphone = ({ className, size=24 }) => (
          <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><rect width="14" height="20" x="5" y="2" rx="2" ry="2"/><path d="M12 18h.01"/></svg>
        );
        const IconSettings = ({ className, size=24 }) => (
          <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.1a2 2 0 0 1-1-1.72v-.51a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z"/><circle cx="12" cy="12" r="3"/></svg>
        );

        // --- [HomePage] ---
        const HomePage = ({ siteConfig, plans, reviews, onProductClick, showPreOrderModal, setShowPreOrderModal }) => {
          const [currentBanner, setCurrentBanner] = useState(0);
          const [internetSpeed, setInternetSpeed] = useState('100M');
          const [internetStb, setInternetStb] = useState('genieA');
          const [showBannerBox, setShowBannerBox] = useState(siteConfig.mainPopup.isActive);
          const [reviewIndex, setReviewIndex] = useState(0);
          const [showNotice, setShowNotice] = useState(false); // [ì¶”ê°€] ê³µì§€ íŒì—… ìƒíƒœ
           
          const [consultForm, setConsultForm] = useState({
            name: '', phone: '',
            interests: { internet: false, mobile: false }, // [ìˆ˜ì •] ê¸°ë³¸ ì„ íƒ í•´ì œ
            mobileModel: '', netSpeed: '100M', tvCount: 'ë² ì´ì§', settop: 'ê¸°ê°€ì§€ë‹ˆA', combine: 'ë¯¸ê²°í•©', promo: false
          });

          // [ì¶”ê°€] í™œì„±í™”ëœ ë°°ë„ˆë§Œ í•„í„°ë§
          const activeBanners = useMemo(() => {
             return siteConfig.banner.images.filter(img => img.isActive);
          }, [siteConfig.banner.images]);

          useEffect(() => {
            if (!activeBanners.length) return;
            const timer = setInterval(() => {
              setCurrentBanner(prev => (prev + 1) % activeBanners.length);
            }, 3000);
            return () => clearInterval(timer);
          }, [activeBanners]);

          useEffect(() => {
            if (!reviews || !reviews.length) return;
            const timer = setInterval(() => {
              setReviewIndex((prev) => (prev + 1) % reviews.length);
            }, 2000);
            return () => clearInterval(timer);
          }, [reviews]);

          // [ì¶”ê°€] ê³µì§€ì‚¬í•­ íŒì—… ê¸°ê°„ ì²´í¬
          useEffect(() => {
             if (siteConfig.noticePopup && siteConfig.noticePopup.isActive) {
                 const now = new Date();
                 const start = new Date(siteConfig.noticePopup.startDate);
                 const end = new Date(siteConfig.noticePopup.endDate);
                 // ì¢…ë£Œì¼ 23:59:59ê¹Œì§€ ìœ íš¨í•˜ë„ë¡ ì„¤ì •
                 end.setHours(23, 59, 59, 999);
                 
                 if (now >= start && now <= end) {
                     setShowNotice(true);
                 }
             }
          }, [siteConfig.noticePopup]);

          const currentReviews = useMemo(() => {
            if (!reviews || !reviews.length) return [];
            const result = [];
            for (let i = 0; i < 4; i++) {
              result.push(reviews[(reviewIndex + i) % reviews.length]);
            }
            return result;
          }, [reviewIndex, reviews]);

          const getInternetPrice = (planId) => {
            const speedData = siteConfig.internet.prices[internetSpeed];
            if (!speedData) return ['0ì›', '0ì›'];
            const stbData = speedData[internetStb];
            if (!stbData) return ['0ì›', '0ì›'];
            return stbData[planId] || ['0ì›', '0ì›'];
          };

          const toggleInterest = (type) => {
            setConsultForm(prev => ({
              ...prev,
              interests: { ...prev.interests, [type]: !prev.interests[type] }
            }));
          };

          const handleConsultSubmit = (e) => {
            e.preventDefault();
            const { internet, mobile } = consultForm.interests;
            if (!internet && !mobile) { alert('ìµœì†Œ í•˜ë‚˜ì˜ ê´€ì‹¬ ìƒí’ˆì„ ì„ íƒí•´ì£¼ì„¸ìš”.'); return; }
            if (!consultForm.name || !consultForm.phone) { alert("ì´ë¦„ê³¼ ì—°ë½ì²˜ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”."); return; }

            let details = [];
            if (internet) details.push(`[ì¸í„°ë„·+TV] ì†ë„:${consultForm.netSpeed}, TV:${consultForm.tvCount}, ì…‹íƒ‘:${consultForm.settop}, ê²°í•©:${consultForm.combine}`);
            if (mobile) details.push(`[íœ´ëŒ€í°] í¬ë§ê¸°ì¢…:${consultForm.mobileModel || 'ë¯¸ì…ë ¥'}`);
            details.push(`[í”„ë¡œëª¨ì…˜ë™ì˜] ${consultForm.promo ? 'ë™ì˜' : 'ë¯¸ë™ì˜'}`);
             
            // ì¹´ì¹´ì˜¤í†¡ ì „ì†¡ìš© í…ìŠ¤íŠ¸ ìƒì„±
            const textToCopy = `[KT ìŠ¤í† ì–´ ë¹ ë¥¸ ìƒë‹´ ì‹ ì²­]\n- ì´ë¦„: ${consultForm.name}\n- ì—°ë½ì²˜: ${consultForm.phone}\n\n${details.join('\n')}\n\nìœ„ ë‚´ìš©ìœ¼ë¡œ ìƒë‹´ ì‹ ì²­í•©ë‹ˆë‹¤.`;

            // í´ë¦½ë³´ë“œ ë³µì‚¬ ë° ì¹´ì¹´ì˜¤í†¡ ì´ë™
            const textArea = document.createElement("textarea");
            textArea.value = textToCopy;
            textArea.style.position = "fixed"; textArea.style.left = "-9999px";
            document.body.appendChild(textArea);
            textArea.select();
            try { 
                document.execCommand('copy'); 
                alert("ìƒë‹´ ë‚´ìš©ì´ ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤.\nì¹´ì¹´ì˜¤í†¡ ì±„ë„ ì±„íŒ…ì°½ì— 'ë¶™ì—¬ë„£ê¸°' í›„ ì „ì†¡í•´ì£¼ì„¸ìš”!"); 
                window.open(siteConfig.info.kakaoUrl, '_blank');
                setConsultForm(prev => ({...prev, name: '', phone: ''}));
            } catch (err) { 
                console.error('Copy failed', err); 
                alert("ìë™ ë³µì‚¬ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤. ìƒë‹´ì°½ì—ì„œ ë°”ë¡œ ë¬¸ì˜í•´ì£¼ì„¸ìš”."); 
                window.open(siteConfig.info.kakaoUrl, '_blank');
            }
            document.body.removeChild(textArea);
          };

          const calcRealPrice = (prod) => {
            if (!prod.prices || Object.keys(prod.prices).length === 0) return "ê°€ê²©ë¬¸ì˜";
            const basePrice = Object.values(prod.prices)[0]; 
            const totalSupport = prod.publicSupport + prod.addSupport;
            const finalPrice = Math.max(0, basePrice - totalSupport);
            if (finalPrice === 0) return "0ì› (ì „ì•¡ì§€ì›)";
            return `${finalPrice.toLocaleString()}ì›`;
          };

          // [NEW] ë©”ì¸í™”ë©´ìš© ìµœì €ê°€ ê³„ì‚°ê¸° (ëª¨ë¸ë³„ ê¸°ì¤€ ìš”ê¸ˆì œ ì ìš©)
          const calcBestPriceInfo = (prod) => {
            if (!prod.prices || Object.keys(prod.prices).length === 0) return { price: "ê°€ê²©ë¬¸ì˜", label: "" };
             
            // 1. ê¸°ê¸°ê°’ (ì²«ë²ˆì§¸ ìš©ëŸ‰ ê¸°ì¤€)
            const devicePrice = Object.values(prod.prices)[0]; 
             
            // 2. ê¸°ì¤€ ìš”ê¸ˆì œ ì„¤ì • (ëª¨ë¸ë³„ ìƒì´)
            let planFee = 90000; // ê¸°ë³¸ 9ë§Œì›
            if (prod.id === 'jump4') planFee = 61000; // Jump4ëŠ” 6.1ë§Œ ê¸°ì¤€
            else if (prod.id === 'a17') planFee = 37000; // A17ì€ 3.7ë§Œ ê¸°ì¤€

            // 3. í˜œíƒ ë¹„êµ
            // A. ê³µí†µì§€ì›ê¸ˆ í˜œíƒ (ê³µì‹œ+ì¶”ê°€)
            // A17ì˜ ê²½ìš° ë©”ì¸ í™”ë©´ì—ì„œëŠ” 'ìµœëŒ€ í˜œíƒ'ì„ ë³´ì—¬ì£¼ê¸° ìœ„í•´ ì‹ ê·œê°€ì…(ì¶”ê°€ì§€ì›ê¸ˆ í¬í•¨) ê¸°ì¤€ìœ¼ë¡œ ê³„ì‚°
            const subsidyBenefit = prod.publicSupport + prod.addSupport;
             
            // B. ì„ íƒì•½ì • í˜œíƒ (ìš”ê¸ˆí• ì¸ 25% * 24ê°œì›” + ì¶”ê°€ì§€ì›ê¸ˆ)
            const contractTotalDiscount = (planFee * 0.25 * 24) + prod.addSupport;

            // 3. ë” í° í˜œíƒ ì ìš©í•˜ì—¬ ì‹¤êµ¬ë§¤ê°€ ê³„ì‚°
            let finalPrice = 0;
            let label = "";

            if (contractTotalDiscount > subsidyBenefit) {
                // ì„ íƒì•½ì •ì´ ìœ ë¦¬í•œ ê²½ìš°
                finalPrice = Math.max(0, devicePrice - contractTotalDiscount);
                label = "ì„ íƒì•½ì •í• ì¸ ê¸°ì¤€";
            } else {
                // ê³µí†µì§€ì›ê¸ˆì´ ìœ ë¦¬í•œ ê²½ìš°
                finalPrice = Math.max(0, devicePrice - subsidyBenefit);
                label = "ê³µí†µì§€ì›ê¸ˆ ê¸°ì¤€";
            }
             
            return {
                price: finalPrice === 0 ? "0ì›" : `${finalPrice.toLocaleString()}ì›`,
                label: label
            };
          };

          const getPlanLabel = (id) => {
            if (id === 'jump4') return '(61ìš”ê¸ˆì œ ê¸°ì¤€)';
            if (id === 'a17') return '(37ìš”ê¸ˆì œ ê¸°ì¤€)';
            return '(90ìš”ê¸ˆì œ ê¸°ì¤€)';
          };

          return (
            <div className="pb-20 bg-gray-50 relative">
              
              {/* [ì¶”ê°€] ê³µì§€ì‚¬í•­ íŒì—… */}
              {showNotice && (
                <div className="fixed inset-0 z-[60] flex items-center justify-center bg-black/60 backdrop-blur-sm px-4 animate-fade-in">
                    <div className="bg-white rounded-2xl shadow-2xl max-w-sm w-full overflow-hidden animate-scale-up">
                        <div className="bg-red-600 p-4 flex justify-between items-center">
                            <h3 className="text-white font-bold text-lg flex items-center gap-2">
                                <span>{siteConfig.noticePopup.title}</span>
                            </h3>
                            <button onClick={() => setShowNotice(false)} className="text-white/80 hover:text-white transition"><IconX size={24}/></button>
                        </div>
                        <div className="p-6 text-center">
                            <div className="text-gray-700 text-sm leading-relaxed mb-6" dangerouslySetInnerHTML={{ __html: siteConfig.noticePopup.content }}></div>
                            <button onClick={() => setShowNotice(false)} className="w-full bg-slate-900 text-white py-3 rounded-xl font-bold hover:bg-slate-800 transition">{siteConfig.noticePopup.btnText}</button>
                        </div>
                    </div>
                </div>
              )}

              <section className="relative w-full md:h-[500px] aspect-square md:aspect-auto bg-gray-900 overflow-hidden">
                {/* [ìˆ˜ì •] í™œì„±í™”ëœ ë°°ë„ˆë§Œ ë Œë”ë§ */}
                {activeBanners.map((img, idx) => (
                  <div key={idx} className={`absolute inset-0 w-full h-full transition-opacity duration-1000 ${currentBanner === idx ? 'opacity-100 z-10' : 'opacity-0 z-0'}`}>
                      <div className="absolute inset-0 w-full h-full overflow-hidden">
                        <img src={img.pcImg} className="hidden md:block w-full h-full object-cover blur-2xl opacity-50 scale-110" alt="" />
                        <img src={img.mobileImg} className="block md:hidden w-full h-full object-cover blur-2xl opacity-50 scale-110" alt="" />
                      </div>
                      <div className="absolute inset-0 flex items-center justify-center p-0">
                        <img src={img.pcImg} className="hidden md:block w-full h-full object-cover object-center drop-shadow-2xl" alt="Main Banner" />
                        <img src={img.mobileImg} className="block md:hidden w-full h-full object-cover object-center drop-shadow-2xl" alt="Main Banner" />
                      </div>
                      <div className="absolute inset-0 flex flex-col items-center justify-center text-center px-4 z-20 pointer-events-none">
                        {showBannerBox && (
                          <div className="bg-white/90 backdrop-blur-md p-6 md:p-10 rounded-3xl shadow-2xl animate-fade-in-up relative pointer-events-auto border border-white/50">
                              <button onClick={() => setShowBannerBox(false)} className="absolute top-4 right-4 text-gray-400 hover:text-gray-600 transition-colors" aria-label="ë‹«ê¸°"><IconX size={20} /></button>
                              <span className="inline-block px-3 py-1 border border-red-500 text-red-500 font-bold rounded-full text-xs mb-3">{siteConfig.mainPopup.badge}</span>
                              <h2 className="text-3xl md:text-5xl font-extrabold leading-tight text-gray-900 mb-4">{siteConfig.mainPopup.title}</h2>
                              <button onClick={() => document.getElementById('products')?.scrollIntoView({behavior:'smooth'})} className="bg-red-600 text-white px-8 py-3 rounded-full font-bold shadow-lg hover:bg-red-700 transition transform hover:scale-105">{siteConfig.mainPopup.btnText}</button>
                          </div>
                        )}
                      </div>
                  </div>
                ))}
              </section>

              <section className="max-w-7xl mx-auto px-4 py-16" id="products">
                <h3 className="text-2xl font-bold mb-8 text-gray-900 text-center md:text-left"><span className="text-red-600 mr-2">MD PICK</span>ë†“ì¹˜ë©´ í›„íšŒí•˜ëŠ” íŠ¹ê°€</h3>
                <div className="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6">
                  {siteConfig.specialProducts.map((product) => {
                    const bestInfo = calcBestPriceInfo(product);
                    return (
                      <div key={product.id} onClick={() => onProductClick(product)} className="bg-white rounded-xl border border-gray-200 overflow-hidden hover:border-red-500 hover:shadow-xl transition-all duration-300 cursor-pointer group">
                        <div className="relative h-64 bg-gray-100 flex items-center justify-center p-6">
                          {product.isHot && <span className="absolute top-0 left-0 bg-red-600 text-white text-xs font-bold px-3 py-1.5 rounded-br-lg z-10">HOT</span>}
                          <img src={product.img} alt={product.name} className="h-full object-contain group-hover:scale-110 transition duration-300 drop-shadow-md" />
                        </div>
                        <div className="p-6">
                          <div className="flex gap-2 mb-2">
                            <span className="text-[10px] font-bold border border-gray-300 text-gray-500 px-1.5 py-0.5 rounded">{product.category}</span>
                            <span className="text-[10px] font-bold bg-red-50 text-red-600 px-1.5 py-0.5 rounded">{product.tag}</span>
                          </div>
                          <h4 className="text-lg font-bold mb-4 text-gray-900 truncate">{product.name}</h4>
                          <div className="border-t border-dashed border-gray-200 my-4"></div>
                          <div className="flex justify-between items-end">
                            <div className="flex flex-col">
                                <span className="text-gray-500 text-sm">{siteConfig.info.mainPriceLabel}</span>
                                <span className="text-[10px] text-blue-500 font-bold bg-blue-50 px-1 rounded inline-block w-fit mt-1">{bestInfo.label}</span>
                            </div>
                            <div className="text-right"><span className="text-xl font-extrabold text-red-600">{bestInfo.price}</span></div>
                          </div>
                        </div>
                      </div>
                    );
                  })}
                </div>
              </section>

              <section className="bg-white py-16 px-4 border-t border-gray-100" id="internet">
                  <div className="max-w-6xl mx-auto">
                     <div className="text-center mb-10"><span className="text-red-600 font-bold text-sm tracking-widest mb-2">INTERNET & TV</span><h2 className="text-3xl font-black text-gray-900">KT ì¸í„°ë„· + TV ê²°í•©í• ì¸</h2></div>
                     <div className="bg-white rounded-3xl p-6 md:p-10 shadow-xl border border-gray-200">
                        <div className="flex flex-col md:flex-row justify-between items-center gap-6 mb-8 border-b border-gray-100 pb-8">
                           <div className="flex gap-2 bg-gray-100 p-1 rounded-xl">
                              {['100M', '500M', '1G'].map(speed => (
                                 <button key={speed} onClick={() => setInternetSpeed(speed)} className={`px-4 py-2 rounded-lg text-sm font-bold transition ${internetSpeed === speed ? 'bg-white shadow text-red-600' : 'text-gray-500'}`}>{speed}</button>
                              ))}
                           </div>
                           <div className="flex items-center gap-2">
                              <span className="text-sm font-bold text-gray-600 flex items-center"><IconMonitor size={16} className="inline mr-1"/> ì…‹íƒ‘ë°•ìŠ¤:</span>
                              <select className="bg-gray-50 border border-gray-200 rounded-lg p-2 text-sm font-bold outline-none" value={internetStb} onChange={e => setInternetStb(e.target.value)}>
                                 <option value="genieA">ê¸°ê°€ì§€ë‹ˆA</option><option value="genie3A">ê¸°ê°€ì§€ë‹ˆ3</option><option value="genie4">ì§€ë‹ˆ4</option><option value="sound">ì‚¬ìš´ë“œë°”</option>
                              </select>
                           </div>
                        </div>
                        <div className="grid grid-cols-1 md:grid-cols-3 gap-6">
                           {siteConfig.internet.cards.map((card, idx) => {
                              const [org, sale] = getInternetPrice(`plan${idx+1}`);
                              return (
                                 <div key={card.id} className={`border rounded-2xl p-6 transition hover:border-red-500 hover:shadow-lg ${card.badge ? 'border-red-200 bg-red-50/10' : 'border-gray-200 bg-white'}`}>
                                    {card.badge && <span className="inline-block bg-red-600 text-white text-[10px] px-2 py-0.5 rounded font-bold mb-2">{card.badge}</span>}
                                    <h3 className="font-bold text-lg text-gray-900">{card.name}</h3>
                                    <p className="text-xs text-gray-500 mb-4">{card.desc}</p>
                                    <div className="space-y-2 mb-4">
                                       <div className="flex justify-between text-xs text-gray-400 line-through"><span>ê¸°ë³¸ë£Œ</span><span>{org}</span></div>
                                       <div className="flex justify-between items-end border-t border-gray-100 pt-3"><span className="font-bold text-gray-700">ê²°í•©ê°€</span><span className="text-2xl font-black text-red-600">{sale}</span></div>
                                    </div>
                                    <button onClick={() => { setConsultForm(prev => ({ ...prev, interests: { ...prev.interests, internet: true } })); document.getElementById('consult-form').scrollIntoView({ behavior: 'smooth' }); }} className="w-full bg-slate-900 text-white py-3 rounded-xl font-bold text-sm hover:bg-red-600 transition">ì‹ ì²­í•˜ê¸°</button>
                                 </div>
                              );
                           })}
                        </div>
                     </div>
                  </div>
              </section>

              <section className="bg-gray-50 py-16 border-t border-gray-200">
                <div className="max-w-7xl mx-auto px-4">
                  <div className="flex justify-between items-end mb-8"><h3 className="text-2xl font-bold text-gray-900">ì‹¤ì‹œê°„ ê°œí†µ í›„ê¸°</h3><span className="text-sm text-gray-500 animate-pulse">â— ì‹¤ì‹œê°„ ì—…ë°ì´íŠ¸ ì¤‘</span></div>
                  <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 transition-all duration-500 ease-in-out">
                    {currentReviews.map((review, idx) => (
                      <div key={`${review.id}-${idx}`} className="bg-white p-6 rounded-xl border border-gray-100 shadow-sm animate-fade-in hover:shadow-md transition h-full flex flex-col">
                        {review.img && (
                          <div className="mb-4 rounded-lg overflow-hidden h-52 w-full bg-gray-100 border border-gray-200 relative group">
                             <div className="absolute inset-0 w-full h-full bg-cover bg-center blur-lg opacity-60 transition-transform duration-500 group-hover:scale-110" style={{ backgroundImage: `url(${review.img})` }}></div>
                             <img src={review.img} alt="review" className="relative w-full h-full object-contain z-10 transition-transform duration-300 group-hover:scale-105" />
                          </div>
                        )}
                        <div className="flex justify-between items-start mb-4">
                          <div className="overflow-hidden">
                            <div className="font-bold text-gray-900 truncate">{review.device}</div>
                            <div className="text-xs text-gray-500">{review.user}ë‹˜ | {review.date}</div>
                          </div>
                          <div className="flex text-amber-400 flex-shrink-0">
                            {[...Array(review.rating)].map((_, j) => <IconStar key={j} size={14} fill="currentColor" />)}
                          </div>
                        </div>
                        <p className="text-gray-600 text-sm line-clamp-2 h-10">"{review.content}"</p>
                      </div>
                    ))}
                  </div>
                </div>
              </section>

              <section id="consult-form" className="bg-gradient-to-b from-white to-gray-50 py-20 px-4">
                  <div className="max-w-lg mx-auto bg-white rounded-3xl shadow-2xl p-8 border border-gray-100">
                     <div className="text-center mb-8"><span className="bg-red-100 text-red-600 text-xs font-bold px-3 py-1 rounded-full mb-3 inline-block">ë¹ ë¥¸ ìƒë‹´</span><h3 className="text-2xl font-bold mb-2 text-gray-900">ê¶ê¸ˆí•œ ì ì´ ìˆìœ¼ì‹ ê°€ìš”?</h3><p className="text-gray-500 text-sm">ì›í•˜ì‹œëŠ” ìƒí’ˆì„ ì„ íƒ(ì¤‘ë³µ ê°€ëŠ¥)í•˜ì‹œë©´ ìì„¸íˆ ì•ˆë‚´í•´ ë“œë¦½ë‹ˆë‹¤.</p></div>
                     <form onSubmit={handleConsultSubmit} className="space-y-6">
                        <div className="flex gap-3">
                           <button type="button" onClick={() => toggleInterest('internet')} className={`flex-1 py-4 rounded-xl text-sm font-bold transition border-2 ${consultForm.interests.internet ? 'bg-red-50 border-red-500 text-red-600' : 'bg-gray-50 border-transparent text-gray-400 hover:bg-gray-100'}`}><IconWifi className={`w-5 h-5 mx-auto mb-1 ${consultForm.interests.internet ? 'text-red-500' : 'text-gray-400'}`}/> ì¸í„°ë„·+TV</button>
                           <button type="button" onClick={() => toggleInterest('mobile')} className={`flex-1 py-4 rounded-xl text-sm font-bold transition border-2 ${consultForm.interests.mobile ? 'bg-red-50 border-red-500 text-red-600' : 'bg-gray-50 border-transparent text-gray-400 hover:bg-gray-100'}`}><IconSmartphone className={`w-5 h-5 mx-auto mb-1 ${consultForm.interests.mobile ? 'text-red-500' : 'text-gray-400'}`}/> íœ´ëŒ€í°</button>
                        </div>
                        <div className="space-y-4">
                          <div className="space-y-2">
                            <input type="text" required placeholder="ì´ë¦„" className="w-full bg-white border border-gray-200 rounded-xl p-3 text-gray-900 focus:border-red-500 outline-none transition-all text-sm" value={consultForm.name} onChange={e => setConsultForm({...consultForm, name: e.target.value})} />
                            {/* [ìˆ˜ì •] ì—°ë½ì²˜ ìë™ í•˜ì´í”ˆ ì ìš© */}
                            <input type="tel" required placeholder="ì—°ë½ì²˜ (ì˜ˆ: 010-1234-5678)" maxLength="13" className="w-full bg-white border border-gray-200 rounded-xl p-3 text-gray-900 focus:border-red-500 outline-none transition-all text-sm" value={consultForm.phone} onChange={e => setConsultForm({...consultForm, phone: formatPhoneNumber(e.target.value)})} />
                          </div>
                          {consultForm.interests.internet && (
                            <div className="bg-slate-50 p-4 rounded-xl border border-slate-100 space-y-3 animate-fade-in">
                              <p className="text-xs font-bold text-slate-500 mb-1">ì¸í„°ë„·+TV ìƒë‹´ ì˜µì…˜</p>
                              <div className="grid grid-cols-2 gap-2">
                                <select className="w-full bg-white border border-gray-200 rounded-lg p-3 text-sm" value={consultForm.netSpeed} onChange={e => setConsultForm({...consultForm, netSpeed: e.target.value})}><option value="100M">100M (ìŠ¬ë¦¼)</option><option value="500M">500M (ë² ì´ì§)</option><option value="1G">1G (ì—ì„¼ìŠ¤)</option></select>
                                <select className="w-full bg-white border border-gray-200 rounded-lg p-3 text-sm" value={consultForm.tvCount} onChange={e => setConsultForm({...consultForm, tvCount: e.target.value})}><option value="ë² ì´ì§">ë² ì´ì§</option><option value="ì§€ë‹ˆ TV ëª¨ë“ G">ì§€ë‹ˆ TV ëª¨ë“ G</option><option value="ì§€ë‹ˆ TV ë””ì¦ˆë‹ˆ+">ì§€ë‹ˆ TV ë””ì¦ˆë‹ˆ+</option></select>
                              </div>
                              <div className="grid grid-cols-2 gap-2">
                                 <select className="w-full bg-white border border-gray-200 rounded-lg p-3 text-sm" value={consultForm.settop} onChange={e => setConsultForm({...consultForm, settop: e.target.value})}><option value="ê¸°ê°€ì§€ë‹ˆA">ê¸°ê°€ì§€ë‹ˆA</option><option value="ê¸°ê°€ì§€ë‹ˆ3">ê¸°ê°€ì§€ë‹ˆ3</option><option value="ì§€ë‹ˆ4">ì§€ë‹ˆ4</option><option value="ì‚¬ìš´ë“œë°”">ì‚¬ìš´ë“œë°”</option></select>
                                 <select className="w-full bg-white border border-gray-200 rounded-lg p-3 text-sm" value={consultForm.combine} onChange={e => setConsultForm({...consultForm, combine: e.target.value})}><option value="ë¯¸ê²°í•©">íœ´ëŒ€í° ê²°í•© ì—†ìŒ</option><option value="ê²°í•©(1íšŒì„ )">íœ´ëŒ€í° ê²°í•© (1íšŒì„ )</option><option value="ê²°í•©(2íšŒì„  ì´ìƒ)">íœ´ëŒ€í° ê²°í•© (2íšŒì„  ì´ìƒ)</option></select>
                              </div>
                            </div>
                          )}
                          {consultForm.interests.mobile && (
                            <div className="bg-slate-50 p-4 rounded-xl border border-slate-100 animate-fade-in">
                              <p className="text-xs font-bold text-slate-500 mb-2">íœ´ëŒ€í° ìƒë‹´ ì˜µì…˜</p>
                              <input type="text" placeholder="ìƒë‹´ ë°›ì„ ê¸°ì¢… (ì˜ˆ: ì•„ì´í°17)" className="w-full bg-white border border-gray-200 rounded-lg p-3 text-sm outline-none focus:border-red-500" value={consultForm.mobileModel} onChange={e => setConsultForm({...consultForm, mobileModel: e.target.value})} />
                            </div>
                          )}
                        </div>
                        <div className="flex items-center gap-2 py-2">
                           <input type="checkbox" id="footer-promo" checked={consultForm.promo} onChange={e => setConsultForm({...consultForm, promo: e.target.checked})} className="w-5 h-5 rounded text-red-600 focus:ring-red-600 border-gray-300"/>
                           <label htmlFor="footer-promo" className="text-sm text-gray-500 cursor-pointer">{siteConfig.info.promotionText}</label>
                        </div>
                        <button type="submit" className="w-full bg-[#FAE100] hover:bg-[#F9E000] text-[#371D1E] py-4 rounded-xl font-bold text-lg transition shadow-lg transform active:scale-[0.98] flex items-center justify-center gap-2"><IconMessage size={20} fill="currentColor" /> ì¹´ì¹´ì˜¤í†¡ìœ¼ë¡œ ìƒë‹´ ì‹ ì²­í•˜ê¸°</button>
                     </form>
                  </div>
              </section>
            </div>
          );
        };

        const ProductDetailPage = ({ product, plans, siteConfig, onBack }) => {
          const [selectedCapacity, setSelectedCapacity] = useState(product.capacity[0]);
          const [selectedColor, setSelectedColor] = useState(product.colors[0]);
          const [installmentPeriod, setInstallmentPeriod] = useState(24);
          const [discountType, setDiscountType] = useState('subsidy'); 
          // [ì¶”ê°€] ê°€ì… ìœ í˜• ìƒíƒœ (ê¸°ë³¸ê°’: ê¸°ê¸°ë³€ê²½)
          const [signupType, setSignupType] = useState('device_change'); 

          const [customerName, setCustomerName] = useState('');
          const [customerPhone, setCustomerPhone] = useState('');
          const [insurance, setInsurance] = useState(siteConfig.options.insurance[0]);
          const [cardApply, setCardApply] = useState(siteConfig.options.cards[0]);
          const [packApply, setPackApply] = useState(siteConfig.options.packs[0]);
          const [combination, setCombination] = useState(siteConfig.options.combinations[0]);
          const [familyFees, setFamilyFees] = useState(Array(7).fill(''));

          const availablePlans = useMemo(() => {
            if (product.id === 'jump4') return plans.filter(p => p.price === 61000);
            else if (product.id === 'a17') return plans.filter(p => p.price === 37000);
            else return plans.filter(p => p.price === 90000 || p.price === 110000);
          }, [product.id, plans]);

          const [selectedPlan, setSelectedPlan] = useState(availablePlans[0]); 
          const [calcResult, setCalcResult] = useState({ deviceCost: 0, monthlyDevice: 0, basePlanFee: 0, contractDiscount: 0, comboDiscount: 0, cardDiscount: 0, insuranceDiscount: 0, totalMonthly: 0, finalPublicSupport: 0, finalAddSupport: 0 });

          useEffect(() => {
            if(availablePlans.length > 0) setSelectedPlan(availablePlans[0]);
          }, [product, availablePlans]);
           
          useEffect(() => {
            if(availablePlans.length > 0) {
                const defaultPlan = availablePlans.find(p => p.price === 90000) || availablePlans[0];
                setSelectedPlan(defaultPlan);
            }
          }, [product, availablePlans]);

          // ê°€ì¡± ìš”ê¸ˆ í•©ê³„ ê³„ì‚° í—¬í¼ í•¨ìˆ˜
          const getFamilyFeeSum = () => {
            return familyFees.reduce((sum, fee) => sum + (Number(fee) || 0), 0);
          };

          // í• ì¸ ë¹„êµ ê³„ì‚° (2ë…„ ì´ í˜œíƒ)
          const compareDiscounts = useMemo(() => {
             if (!selectedPlan) return { subsidy: 0, contract: 0 };
             
             // [ìˆ˜ì •] A17 ëª¨ë¸ì€ ì‹ ê·œê°€ì…ì¼ ë•Œë§Œ ì¶”ê°€ì§€ì›ê¸ˆ í¬í•¨ ë¹„êµ
             let addSupportBenefit = product.addSupport;
             if (product.id === 'a17' && signupType !== 'new_signup') {
                 addSupportBenefit = 0;
             }

             // 1. ê³µí†µì§€ì›ê¸ˆ ë°©ì‹ ì´ í˜œíƒ: ê³µí†µì§€ì›ê¸ˆ + ì¶”ê°€ì§€ì›ê¸ˆ
             const subsidyBenefit = product.publicSupport + addSupportBenefit;
             
             // 2. ì„ íƒì•½ì • ë°©ì‹ ì´ í˜œíƒ: (ìš”ê¸ˆí• ì¸ 25% * 24ê°œì›”) + ì¶”ê°€ì§€ì›ê¸ˆ
             const monthlyContractDiscount = Math.floor(selectedPlan.price * 0.25);
             const contractBenefit = (monthlyContractDiscount * 24) + addSupportBenefit;

             return { subsidy: subsidyBenefit, contract: contractBenefit };
          }, [selectedPlan, product, signupType]);

          useEffect(() => {
            if(!selectedPlan) return;
            const prices = product.prices || {};
            let devicePrice = prices[selectedCapacity] || Object.values(prices)[0] || 0;
             
            let appliedSubsidy = 0;
            let currentPublicSupport = 0;
            let currentAddSupport = 0;
             
            const basePlanFee = selectedPlan.price;
            let contractDiscount = 0;

            if (discountType === 'subsidy') {
              const isHighPlan = selectedPlan.price >= 90000;
              const isJumpCondition = product.id === 'jump4' && selectedPlan.price >= 61000;
              // [ìˆ˜ì •] A17 ì¡°ê±´: 37ìš”ê¸ˆì œ ì´ìƒ AND ì‹ ê·œê°€ì…(new_signup)ì¼ ë•Œë§Œ ì¶”ê°€ì§€ì›ê¸ˆ ì ìš©
              const isA17Condition = product.id === 'a17' && selectedPlan.price >= 37000 && signupType === 'new_signup';
              
              currentPublicSupport = product.publicSupport; 
              
              if (isHighPlan || isJumpCondition || isA17Condition) {
                  currentAddSupport = product.addSupport; 
              } else {
                  currentAddSupport = 0;
              }
              
              appliedSubsidy = currentPublicSupport + currentAddSupport;
            } else {
              contractDiscount = Math.floor(basePlanFee * 0.25); 
              // [ìˆ˜ì •] ì„ íƒì•½ì • ì‹œì—ë„ A17ì€ ì‹ ê·œê°€ì… ì¡°ê±´ ì²´í¬
              if (product.id === 'a17') {
                  currentAddSupport = (signupType === 'new_signup') ? product.addSupport : 0;
              } else {
                  currentAddSupport = product.addSupport;
              }
              appliedSubsidy = currentAddSupport; 
            }

            const finalDevicePrice = Math.max(0, devicePrice - appliedSubsidy);
            let monthlyDeviceCost = 0;
            if (finalDevicePrice > 0 && installmentPeriod > 0) {
                const annualRate = 0.059; 
                const monthlyRate = annualRate / 12;
                monthlyDeviceCost = Math.floor((finalDevicePrice * monthlyRate * Math.pow(1 + monthlyRate, installmentPeriod)) / (Math.pow(1 + monthlyRate, installmentPeriod) - 1));
                monthlyDeviceCost = Math.floor(monthlyDeviceCost / 10) * 10;
            }

            // ê²°í•© í• ì¸ ê³„ì‚° ë¡œì§ (ì´ì•¡ ê²°í•© ê¸°ì—¬ë„ë³„ í• ì¸ - ì •ë°€ ê³„ì‚°)
            let comboDiscount = 0;
            if (combination.type === 'percent') {
              comboDiscount = Math.floor(basePlanFee * combination.discount); 
            } else if (combination.type === 'total') {
               // ì´ì•¡ ê²°í•© í• ì¸ ë¡œì§ (KT ì¸í„°ë„· ë² ì´ì§ 500M ê¸°ì¤€)
               const familySum = getFamilyFeeSum();
               const totalMobileFee = basePlanFee + familySum;
               let totalDiscountAmount = 0;

               // êµ¬ê°„ë³„ ì „ì²´ ëª¨ë°”ì¼ í• ì¸ì•¡ ì„¤ì • (500M ì¸í„°ë„· ê¸°ì¤€)
               if (totalMobileFee < 64900) {
                   totalDiscountAmount = 0; 
               } else if (totalMobileFee < 108900) {
                   totalDiscountAmount = 5500;
               } else if (totalMobileFee < 141900) {
                   totalDiscountAmount = 16610;
               } else if (totalMobileFee < 174900) {
                   totalDiscountAmount = 22110;
               } else {
                   totalDiscountAmount = 27610;
               }

               // ë‚´ ê¸°ì—¬ë„ì— ë”°ë¥¸ í• ì¸ì•¡ ê³„ì‚° (ë‚´ ìš”ê¸ˆ / ì „ì²´ ìš”ê¸ˆ)
               if (totalMobileFee > 0 && totalDiscountAmount > 0) {
                   comboDiscount = Math.floor((totalDiscountAmount * (basePlanFee / totalMobileFee)) / 10) * 10;
               }
            } else {
              comboDiscount = combination.discount;
            }

            const baseInsuranceFee = insurance.price || 0;
            let insuranceDiscount = 0;
            let insuranceDiscountMsg = "";
            if (selectedPlan.price >= 110000 && baseInsuranceFee > 0) {
                const discountAmount = 4500; 
                insuranceDiscount = Math.min(baseInsuranceFee, discountAmount); 
                insuranceDiscountMsg = "(VIPí• ì¸ ì ìš©)";
            }
            const finalInsuranceFee = Math.max(0, baseInsuranceFee - insuranceDiscount);

            let finalPlanFee = basePlanFee - contractDiscount - comboDiscount - cardApply.discount;
            finalPlanFee = Math.max(0, finalPlanFee); 

            const total = monthlyDeviceCost + finalPlanFee + finalInsuranceFee + (packApply.price || 0);

            setCalcResult({
              deviceCost: finalDevicePrice,
              monthlyDevice: monthlyDeviceCost,
              basePlanFee: basePlanFee,
              contractDiscount: contractDiscount,
              comboDiscount: comboDiscount,
              cardDiscount: cardApply.discount,
              insuranceDiscount: insuranceDiscount,
              totalMonthly: total,
              insuranceDiscountMsg: insuranceDiscountMsg,
              finalPublicSupport: currentPublicSupport,
              finalAddSupport: currentAddSupport
            });
          }, [selectedCapacity, installmentPeriod, discountType, selectedPlan, product, insurance, cardApply, packApply, combination, familyFees, signupType]);

          const handleFamilyFeeChange = (index, value) => {
            const newFees = [...familyFees];
            newFees[index] = value;
            setFamilyFees(newFees);
          };

          // ê°€ì…ìœ í˜• í•œê¸€ ë³€í™˜
          const getSignupTypeText = (type) => {
              if (type === 'new_signup') return 'ì‹ ê·œê°€ì…';
              if (type === 'number_portability') return 'ë²ˆí˜¸ì´ë™';
              return 'ê¸°ê¸°ë³€ê²½';
          };

          const handleKakaoConsult = () => {
             if (!customerName || !customerPhone) { alert("ì›í™œí•œ ìƒë‹´ì„ ìœ„í•´ ì´ë¦„ê³¼ ì—°ë½ì²˜ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”."); return; }
             const familySum = getFamilyFeeSum();
             const familyFeeDetails = familyFees.map((fee, i) => fee ? `ê°€ì¡±${i+1}: ${fee}ì›` : '').filter(Boolean).join(', ');
             const textToCopy = `[KT ìŠ¤í† ì–´ ìƒë‹´ ì‹ ì²­]\n- ì‹ ì²­ì: ${customerName}\n- ì—°ë½ì²˜: ${customerPhone}\n- ëª¨ë¸: ${product.name}\n- ìš©ëŸ‰: ${selectedCapacity}\n- ìƒ‰ìƒ: ${selectedColor.name}\n- ê°€ì…ìœ í˜•: ${getSignupTypeText(signupType)}\n- ìš”ê¸ˆì œ: ${selectedPlan ? selectedPlan.name : 'ì„ íƒì—†ìŒ'}\n- ì•½ì •ì¡°ê±´: ${installmentPeriod}ê°œì›” / ${discountType === 'subsidy' ? 'ê³µí†µì§€ì›ê¸ˆ' : 'ì„ íƒì•½ì •'}\n- ì¶”ê°€ì˜µì…˜: \n  ë³´í—˜(${insurance.name}) \n  ì œíœ´ì¹´ë“œ(${cardApply.name}) \n  í•„ìˆ˜íŒ©(${packApply.name})\n  ê²°í•©í• ì¸(${combination.name})\n  (ê°€ì¡±í•©ì‚°: ${familySum}ì› [${familyFeeDetails}])\n- ì›” ì˜ˆìƒ ë‚©ë¶€ê¸ˆ: ${calcResult.totalMonthly.toLocaleString()}ì› (í• ë¶€ì´ì 5.9% í¬í•¨)\n\nìœ„ ë‚´ìš©ìœ¼ë¡œ ìƒë‹´ ì‹ ì²­í•©ë‹ˆë‹¤.`;
             const textArea = document.createElement("textarea");
             textArea.value = textToCopy;
             textArea.style.position = "fixed"; textArea.style.left = "-9999px";
             document.body.appendChild(textArea);
             textArea.select();
             try { document.execCommand('copy'); alert("ì„ íƒí•˜ì‹  ëª¨ë“  ë‚´ìš©ì´ ìë™ ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤.\nì±„ë„ì°½ì— 'ë¶™ì—¬ë„£ê¸°'í•´ì„œ ìƒë‹´ ì‹ ì²­í•´ì£¼ì„¸ìš”!"); } catch (err) { console.error('Copy failed', err); alert("ìë™ ë³µì‚¬ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤. ìƒë‹´ì°½ì—ì„œ ë¬¸ì˜í•´ì£¼ì„¸ìš”."); }
             document.body.removeChild(textArea);
             window.open(siteConfig.info.kakaoUrl, '_blank');
          };

          if (!selectedPlan) return <div>Loading...</div>;

          return (
            <div className="animate-fade-in bg-white min-h-screen pb-20">
              <div className="max-w-7xl mx-auto px-4 py-6">
                <button onClick={onBack} className="flex items-center text-gray-500 hover:text-red-600 mb-6 font-medium transition"><IconArrowLeft size={20} className="mr-2"/> ëª©ë¡ìœ¼ë¡œ ëŒì•„ê°€ê¸°</button>
                <div className="flex flex-col lg:flex-row gap-12">
                  <div className="lg:w-1/2">
                      <div className="sticky top-24">
                        <div className="aspect-square bg-gray-50 rounded-2xl border border-gray-100 flex items-center justify-center p-8 relative">
                          <span className="absolute top-6 right-6 bg-red-600 text-white font-bold px-3 py-1 rounded-full text-sm">BEST</span>
                          <img src={product.img} alt={product.name} className="w-full h-full object-contain drop-shadow-2xl" />
                        </div>
                      </div>
                  </div>
                  <div className="lg:w-1/2">
                      <h2 className="text-3xl font-bold mb-2 text-gray-900">{product.name}</h2>
                      <div className="flex items-center gap-2 mb-8"><div className="flex text-amber-400">{[...Array(5)].map((_,i) => <IconStar key={i} fill="currentColor" size={18} />)}</div><span className="text-gray-500 text-sm font-medium">4.9 (284ê±´ í›„ê¸°)</span></div>
                      <div className="space-y-8">
                        <div className="grid grid-cols-2 gap-4">
                            <div>
                              <label className="block text-sm font-bold mb-2 text-gray-800">ìš©ëŸ‰</label>
                              <select className="w-full p-3 border border-gray-300 rounded-lg outline-none focus:border-red-500 font-bold" value={selectedCapacity} onChange={(e) => setSelectedCapacity(e.target.value)}>{product.capacity.map(c => <option key={c} value={c}>{c}</option>)}</select>
                            </div>
                            <div>
                              <label className="block text-sm font-bold mb-2 text-gray-800">ìƒ‰ìƒ</label>
                              <div className="flex gap-2 overflow-x-auto pb-2 items-center">{product.colors.map(c => (<button key={c.name} onClick={() => setSelectedColor(c)} className={`w-6 h-6 rounded-full border flex-shrink-0 transition-all duration-200 ${selectedColor.name === c.name ? 'ring-2 ring-red-500 ring-offset-2 scale-110 shadow-md border-transparent' : 'border-gray-300 hover:scale-110 hover:border-gray-400'}`} style={{ backgroundColor: c.code }} title={c.name} />))}</div>
                              <div className="text-xs text-gray-500 mt-1 font-medium">{selectedColor.name}</div>
                            </div>
                        </div>

                        {/* [NEW] ê°€ì… ìœ í˜• ì„ íƒ */}
                        <div>
                          <label className="block text-sm font-bold mb-2 text-gray-800">ê°€ì… ìœ í˜•</label>
                          <div className="flex gap-2">
                              {['device_change', 'number_portability', 'new_signup'].map(type => (
                                  <button 
                                      key={type}
                                      onClick={() => setSignupType(type)}
                                      className={`flex-1 py-3 border rounded-lg text-sm font-medium transition ${signupType === type ? 'border-red-600 bg-red-50 text-red-700' : 'border-gray-300 text-gray-600'}`}
                                  >
                                      {type === 'device_change' ? 'ê¸°ê¸°ë³€ê²½' : type === 'number_portability' ? 'ë²ˆí˜¸ì´ë™' : 'ì‹ ê·œê°€ì…'}
                                  </button>
                              ))}
                          </div>
                          {product.id === 'a17' && signupType !== 'new_signup' && (
                              <p className="text-[10px] text-red-500 mt-1">* í•´ë‹¹ ëª¨ë¸ì€ ì‹ ê·œê°€ì… ì‹œì—ë§Œ ì¶”ê°€ ì§€ì›ê¸ˆ í˜œíƒì´ ì ìš©ë©ë‹ˆë‹¤.</p>
                          )}
                        </div>

                        <div>
                            <label className="block text-sm font-bold mb-2 text-gray-800">ìš”ê¸ˆì œ</label>
                            <select className={`w-full p-3 border border-gray-300 rounded-lg outline-none focus:border-red-500 font-medium ${availablePlans.length === 1 ? 'bg-gray-100 text-gray-500 cursor-not-allowed' : ''}`} onChange={(e) => setSelectedPlan(availablePlans.find(p => p.id === parseInt(e.target.value)))} value={selectedPlan?.id} disabled={availablePlans.length === 1}>{availablePlans.map(p => <option key={p.id} value={p.id}>{p.name} ({p.data}) - ì›” {p.price.toLocaleString()}ì›</option>)}</select>
                            <p className="text-xs text-red-500 mt-1">* 9ë§Œì› ìš”ê¸ˆì œ ìœ ì§€ ì‹œ íŠ¹ê°€ ì§€ì›ê¸ˆì´ ì ìš©ë©ë‹ˆë‹¤. (ì¼ë¶€ ëª¨ë¸ ì œì™¸)</p>
                        </div>
                        <div className="bg-gray-50 p-5 rounded-xl border border-gray-100 space-y-4">
                            <div className="flex items-center gap-2 mb-2"><IconSettings size={18} className="text-gray-500"/> <span className="font-bold text-gray-800">ì¶”ê°€ ì˜µì…˜ ì„ íƒ</span></div>
                            <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
                              <div><label className="block text-xs font-bold mb-1 text-gray-600">ë³´í—˜ ê°€ì…</label><select className="w-full p-2 border border-gray-200 rounded-lg text-sm" value={JSON.stringify(insurance)} onChange={e => setInsurance(JSON.parse(e.target.value))}>{siteConfig.options.insurance.map((opt, i) => <option key={i} value={JSON.stringify(opt)}>{opt.name} {opt.price > 0 ? `(+${opt.price.toLocaleString()}ì›)` : ''}</option>)}</select></div>
                              <div><label className="block text-xs font-bold mb-1 text-gray-600">ì œíœ´ì¹´ë“œ</label><select className="w-full p-2 border border-gray-200 rounded-lg text-sm" value={JSON.stringify(cardApply)} onChange={e => setCardApply(JSON.parse(e.target.value))}>{siteConfig.options.cards.map((opt, i) => <option key={i} value={JSON.stringify(opt)}>{opt.name}</option>)}</select></div>
                              <div><label className="block text-xs font-bold mb-1 text-gray-600">í•„ìˆ˜íŒ©</label><select className="w-full p-2 border border-gray-200 rounded-lg text-sm" value={JSON.stringify(packApply)} onChange={e => setPackApply(JSON.parse(e.target.value))}>{siteConfig.options.packs.map((opt, i) => <option key={i} value={JSON.stringify(opt)}>{opt.name}</option>)}</select></div>
                              <div><label className="block text-xs font-bold mb-1 text-gray-600">ê²°í•©í• ì¸</label><select className="w-full p-2 border border-gray-200 rounded-lg text-sm" value={JSON.stringify(combination)} onChange={e => setCombination(JSON.parse(e.target.value))}>{siteConfig.options.combinations.map((opt, i) => <option key={i} value={JSON.stringify(opt)}>{opt.name}</option>)}</select></div>
                            </div>
                             
                            {(combination.type === 'total' || combination.name.includes('í”„ë¦¬ë¯¸ì—„ ê°€ì¡±ê²°í•©')) && (
                                <div className="mt-2 p-4 bg-blue-50 rounded-xl border border-blue-100 animate-fade-in">
                                    <label className="block text-xs font-bold mb-2 text-blue-800">ê°€ì¡± êµ¬ì„±ì› ìš”ê¸ˆ ì…ë ¥ (ë³¸ì¸ ì œì™¸, ìµœëŒ€ 7ëª…)</label>
                                    <div className="grid grid-cols-2 gap-2">
                                        {familyFees.map((fee, index) => (
                                            <input 
                                                key={index}
                                                type="number" 
                                                placeholder={`ê°€ì¡±${index + 1} ìš”ê¸ˆ`} 
                                                className="w-full p-2 border border-blue-200 rounded text-sm focus:outline-none focus:border-blue-500 bg-white"
                                                value={fee}
                                                onChange={(e) => handleFamilyFeeChange(index, e.target.value)}
                                            />
                                        ))}
                                    </div>
                                    <div className="text-right mt-2 text-blue-600 font-bold text-sm">
                                        ê°€ì¡± í•©ê³„: {getFamilyFeeSum().toLocaleString()}ì›
                                    </div>
                                    <p className="text-[10px] text-blue-500 mt-1">* ì…ë ¥í•˜ì‹  ê°€ì¡± ìš”ê¸ˆ í•©ê³„ì— ë”°ë¼ í• ì¸ì´ ì ìš© ë° ê¸°ë¡ë©ë‹ˆë‹¤.</p>
                                </div>
                            )}
                        </div>

                        {/* [ìˆ˜ì •] í• ì¸ ë°©ë²• ì„ íƒ ì˜ì—­ (2ë…„ ì´ í˜œíƒ ë¹„êµ í‘œì‹œ) */}
                        <div className="bg-white p-5 rounded-xl border border-gray-200">
                          <label className="block text-sm font-bold mb-3 text-gray-800">í• ì¸ ë°©ë²• (2ë…„ ì´ í˜œíƒ ë¹„êµ)</label>
                          <div className="grid grid-cols-2 gap-3">
                            {/* ê³µí†µì§€ì›ê¸ˆ ì˜µì…˜ */}
                            <div onClick={() => setDiscountType('subsidy')} className={`p-4 border rounded-xl cursor-pointer transition relative overflow-hidden ${discountType === 'subsidy' ? 'border-red-600 bg-white ring-1 ring-red-600 shadow-sm' : 'border-gray-200 bg-white hover:border-gray-300'}`}>
                                {compareDiscounts.subsidy > compareDiscounts.contract && <div className="absolute top-0 right-0 bg-red-600 text-white text-[10px] px-2 py-0.5 rounded-bl-lg font-bold z-10">ì¶”ì²œ (í˜œíƒâ†‘)</div>}
                                <div className="font-bold text-gray-900 mb-1">ê³µí†µì§€ì›ê¸ˆ</div>
                                <div className="text-red-600 font-bold text-lg">ì´ {compareDiscounts.subsidy.toLocaleString()}ì›</div>
                                <div className="text-xs text-gray-500 mt-1">ê¸°ê¸°ê°’ ì„ í• ì¸ (ê³µí†µ+ì¶”ê°€)</div>
                            </div>
                            {/* ì„ íƒì•½ì • ì˜µì…˜ */}
                            <div onClick={() => setDiscountType('contract')} className={`p-4 border rounded-xl cursor-pointer transition relative overflow-hidden ${discountType === 'contract' ? 'border-red-600 bg-white ring-1 ring-red-600 shadow-sm' : 'border-gray-200 bg-white hover:border-gray-300'}`}>
                                {compareDiscounts.contract > compareDiscounts.subsidy && <div className="absolute top-0 right-0 bg-red-600 text-white text-[10px] px-2 py-0.5 rounded-bl-lg font-bold z-10">ì¶”ì²œ (í˜œíƒâ†‘)</div>}
                                <div className="font-bold text-gray-900 mb-1">ì„ íƒì•½ì •</div>
                                <div className="text-red-600 font-bold text-lg">ì´ {compareDiscounts.contract.toLocaleString()}ì›</div>
                                <div className="text-xs text-gray-500 mt-1">ìš”ê¸ˆ 25% + ì¶”ê°€ì§€ì›ê¸ˆ</div>
                            </div>
                          </div>
                        </div>

                        <div>
                          <label className="block text-sm font-bold mb-2 text-gray-800">í• ë¶€ ê¸°ê°„</label>
                          <div className="flex gap-2">{[24, 30, 36, 48].map(month => (<button key={month} onClick={() => setInstallmentPeriod(month)} className={`flex-1 py-2 border rounded-lg text-sm font-medium transition ${installmentPeriod === month ? 'border-red-600 bg-red-50 text-red-700' : 'border-gray-300 text-gray-600'}`}>{month}ê°œì›”</button>))}</div>
                        </div>
                        {/* ... (ì‹ ì²­ì ì •ë³´ ë° í•˜ë‹¨ ìš”ê¸ˆ ê³„ì‚° ì˜ì—­ ë™ì¼) ... */}
                        <div className="bg-white p-5 rounded-xl border border-gray-200 shadow-sm mt-6">
                          <div className="flex items-center gap-2 mb-3"><span className="font-bold text-gray-800 text-lg">ì‹ ì²­ì ì •ë³´</span><span className="text-xs text-red-500 font-medium">* í•„ìˆ˜ ì…ë ¥</span></div>
                          <div className="space-y-3">
                            <div><input type="text" placeholder="ì´ë¦„" className="w-full p-3 border border-gray-200 rounded-lg outline-none focus:border-red-500 text-sm bg-gray-50 focus:bg-white transition-colors" value={customerName} onChange={(e) => setCustomerName(e.target.value)} /></div>
                            {/* [ìˆ˜ì •] ì—°ë½ì²˜ ìë™ í•˜ì´í”ˆ ì ìš© */}
                            <div><input type="tel" placeholder="ì—°ë½ì²˜ (ì˜ˆ: 010-1234-5678)" maxLength="13" className="w-full p-3 border border-gray-200 rounded-lg outline-none focus:border-red-500 text-sm bg-gray-50 focus:bg-white transition-colors" value={customerPhone} onChange={(e) => setCustomerPhone(formatPhoneNumber(e.target.value))} /></div>
                          </div>
                        </div>
                        <div className="border-t-2 border-gray-900 pt-6 mt-8">
                            <div className="space-y-3 mb-6">
                              <div className="flex justify-between text-gray-500"><span>ì¶œê³ ê°€</span><span>{(product.prices && product.prices[selectedCapacity] ? product.prices[selectedCapacity] : 0).toLocaleString()}ì›</span></div>
                              <div className="flex justify-between text-gray-500 font-bold text-red-500">
                                  {discountType === 'subsidy' ? (
                                      <div className="w-full">
                                          <div className="flex justify-between mb-1">
                                              <span>ê³µí†µì§€ì›ê¸ˆ</span>
                                              <span>-{calcResult.finalPublicSupport.toLocaleString()}ì›</span>
                                          </div>
                                          {calcResult.finalAddSupport > 0 && (
                                              <div className="flex justify-between">
                                                  <span>ì¶”ê°€ ì§€ì›ê¸ˆ</span>
                                                  <span>-{calcResult.finalAddSupport.toLocaleString()}ì›</span>
                                              </div>
                                          )}
                                      </div>
                                  ) : (
                                       <div className="w-full">
                                            {calcResult.finalAddSupport > 0 ? (
                                                <div className="flex justify-between">
                                                    <span>ì¶”ê°€ ì§€ì›ê¸ˆ</span>
                                                    <span>-{calcResult.finalAddSupport.toLocaleString()}ì›</span>
                                                </div>
                                             ) : (
                                                <div className="flex justify-between"><span>ê³µí†µì§€ì›ê¸ˆ</span><span>0ì›</span></div>
                                             )}
                                       </div>
                                  )}
                              </div>
                              <div className="border-t border-dashed border-gray-200 my-2"></div>
                              <div className="flex justify-between text-gray-800 font-bold"><span>ì›” í• ë¶€ê¸ˆ (ë‹¨ë§ê¸°)</span><span>{calcResult.monthlyDevice.toLocaleString()}ì›</span></div>
                              <div className="flex justify-between text-gray-800 font-bold mt-2"><span>ì›” í†µì‹ ë£Œ (ìš”ê¸ˆì œ)</span><span>{calcResult.basePlanFee.toLocaleString()}ì›</span></div>
                              <div className="bg-red-50 p-4 rounded-lg text-sm space-y-1 mt-2">
                                   <div className="font-bold text-red-600 mb-2 border-b border-red-100 pb-1">â–¼ ì›” ìš”ê¸ˆ í• ì¸ ë‚´ì—­</div>
                                   {calcResult.contractDiscount > 0 && (<div className="flex justify-between text-gray-600"><span>ì„ íƒì•½ì • í• ì¸</span><span>-{calcResult.contractDiscount.toLocaleString()}ì›</span></div>)}
                                   {calcResult.comboDiscount > 0 && (<div className="flex justify-between text-gray-600"><span>ê²°í•© í• ì¸</span><span>-{calcResult.comboDiscount.toLocaleString()}ì›</span></div>)}
                                   {calcResult.cardDiscount > 0 && (<div className="flex justify-between text-gray-600"><span>ì œíœ´ì¹´ë“œ í• ì¸</span><span>-{calcResult.cardDiscount.toLocaleString()}ì›</span></div>)}
                                   {calcResult.insuranceDiscount > 0 && (<div className="flex justify-between text-gray-600"><span>ë©¤ë²„ì‹­ ë³´í—˜ í• ì¸</span><span>-{calcResult.insuranceDiscount.toLocaleString()}ì›</span></div>)}
                                   {(calcResult.contractDiscount === 0 && calcResult.comboDiscount === 0 && calcResult.cardDiscount === 0 && calcResult.insuranceDiscount === 0) && (<div className="text-gray-400 text-center text-xs">ì ìš©ëœ ì¶”ê°€ í• ì¸ì´ ì—†ìŠµë‹ˆë‹¤.</div>)}
                                   <div className="mt-2 text-xs text-gray-500 text-right border-t border-red-100 pt-2">
                                      * ì •í™•í•œ í• ì¸ë‚´ìš©ì€ ì ‘ìˆ˜ í›„ ìƒë‹´ì„ í†µí•´ í™•ì¸ ê°€ëŠ¥í•©ë‹ˆë‹¤.
                                   </div>
                              </div>
                              {(insurance.price > 0 || packApply.price > 0) && (<div className="flex justify-between text-gray-500 mt-2 text-sm"><span>ë¶€ê°€ì„œë¹„ìŠ¤(ë³´í—˜/íŒ©)</span><span>+{((insurance.price || 0) + (packApply.price || 0)).toLocaleString()}ì›</span></div>)}
                            </div>
                            <div className="flex justify-between items-center bg-gray-50 p-6 rounded-xl">
                              <span className="font-bold text-xl text-gray-900">ì›” ì˜ˆìƒ ë‚©ë¶€ê¸ˆì•¡</span>
                              <div className="text-right">
                                  <span className="text-3xl font-extrabold text-red-600">{calcResult.totalMonthly.toLocaleString()}</span>
                                  <span className="text-lg font-bold text-gray-900">ì›</span>
                                  <p className="text-xs text-gray-400 mt-1">VAT ë° í• ë¶€ìˆ˜ìˆ˜ë£Œ(5.9%) í¬í•¨ {calcResult.insuranceDiscountMsg && <span className="text-blue-500 ml-1">{calcResult.insuranceDiscountMsg}</span>}</p>
                              </div>
                            </div>
                        </div>
                        <div className="flex gap-3">
                            {/* ì´ë©”ì¼ ë²„íŠ¼ ì‚­ì œë¨, ì¹´ì¹´ì˜¤í†¡ ë²„íŠ¼ w-fullë¡œ ë³€ê²½ */}
                            <button onClick={handleKakaoConsult} className="w-full py-4 bg-[#FAE100] text-[#371D1E] rounded-xl font-bold text-lg hover:bg-[#F9E000] shadow-lg transition flex items-center justify-center gap-2"><IconMessage size={20} fill="currentColor" /> ì¹´ì¹´ì˜¤í†¡ ìƒë‹´ì ‘ìˆ˜</button>
                        </div>
                      </div>
                  </div>
                </div>
              </div>
            </div>
          );
        };

        const App = () => {
          const [currentView, setCurrentView] = useState('home'); 
          const [selectedProduct, setSelectedProduct] = useState(null);
          const [showConsult, setShowConsult] = useState(true);
          const [showPreOrderModal, setShowPreOrderModal] = useState(false);
          const [preOrderForm, setPreOrderForm] = useState({ model: SITE_CONFIG.preOrder.models[0], name: '', phone: '' });

          // EmailJS ë¡œë”© useEffect ì‚­ì œë¨

          const handleProductClick = (product) => { setSelectedProduct(product); setCurrentView('detail'); window.scrollTo(0, 0); };
          const handleBack = () => { setCurrentView('home'); setSelectedProduct(null); window.scrollTo(0, 0); };

          const handlePreOrderSubmit = (e) => {
              e.preventDefault();
              if (!preOrderForm.name || !preOrderForm.phone) { alert('ì´ë¦„ê³¼ ì—°ë½ì²˜ë¥¼ ëª¨ë‘ ì…ë ¥í•´ì£¼ì„¸ìš”.'); return; }
              
              const textToCopy = `[KT ìŠ¤í† ì–´ ì‚¬ì „ì˜ˆì•½ ì•Œë¦¼ì‹ ì²­]\n- ì´ë¦„: ${preOrderForm.name}\n- ì—°ë½ì²˜: ${preOrderForm.phone}\n- ê´€ì‹¬ëª¨ë¸: ${preOrderForm.model}\n\nìœ„ ë‚´ìš©ìœ¼ë¡œ ì‚¬ì „ì˜ˆì•½ ì•Œë¦¼ì„ ì‹ ì²­í•©ë‹ˆë‹¤.`;
              
              const textArea = document.createElement("textarea");
              textArea.value = textToCopy;
              textArea.style.position = "fixed"; textArea.style.left = "-9999px";
              document.body.appendChild(textArea);
              textArea.select();
              try { 
                  document.execCommand('copy'); 
                  alert("ì‹ ì²­ ë‚´ìš©ì´ ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤.\nì¹´ì¹´ì˜¤í†¡ ì±„ë„ ì±„íŒ…ì°½ì— 'ë¶™ì—¬ë„£ê¸°' í›„ ì „ì†¡í•´ì£¼ì„¸ìš”!"); 
                  setShowPreOrderModal(false); 
                  setPreOrderForm({ ...preOrderForm, name: '', phone: '' });
                  window.open(SITE_CONFIG.info.kakaoUrl, '_blank');
              } catch (err) { 
                  console.error('Copy failed', err); 
                  alert("ìë™ ë³µì‚¬ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤. ìƒë‹´ì°½ì—ì„œ ë°”ë¡œ ë¬¸ì˜í•´ì£¼ì„¸ìš”."); 
                  window.open(SITE_CONFIG.info.kakaoUrl, '_blank');
              }
              document.body.removeChild(textArea);
          };

          return (
            <div className="min-h-screen bg-white font-sans text-gray-900 selection:bg-red-100 selection:text-red-900">
              <div className="bg-gray-100 text-[10px] sm:text-xs py-2 px-4 border-b border-gray-200">
                <div className="max-w-7xl mx-auto flex justify-between items-center text-gray-500"><span>{SITE_CONFIG.info.topBannerText}</span><div className="flex gap-4"></div></div>
              </div>
              <header className="sticky top-0 z-50 bg-white shadow-lg shadow-gray-200/50">
                <div className="relative z-20 bg-white">
                    <div className="max-w-7xl mx-auto px-4 py-4 flex justify-between items-center">
                      <div className="flex items-center cursor-pointer group" onClick={handleBack}><img src={SITE_CONFIG.info.logoImg} alt="KT Store Logo" className="h-9 md:h-11 object-contain mr-2 transition-transform duration-300 group-hover:scale-105" /></div>
                      <div className="flex items-center space-x-2"></div>
                    </div>
                </div>
                <div className="relative z-10 bg-slate-50 border-t border-gray-200 shadow-[inset_0_2px_4px_rgba(0,0,0,0.02)]">
                    <nav className="max-w-7xl mx-auto px-4 flex space-x-8 overflow-x-auto whitespace-nowrap scrollbar-hide py-3 md:justify-start">
                        <button onClick={() => document.getElementById('products')?.scrollIntoView({behavior:'smooth'})} className="text-sm md:text-base font-bold text-gray-500 hover:text-gray-900 transition-colors relative group py-1">ì´ë‹¬ì˜ íŠ¹ê°€í°<span className="absolute bottom-0 left-0 w-0 h-0.5 bg-red-600 transition-all duration-300 group-hover:w-full"></span></button>
                        <button onClick={() => document.getElementById('internet')?.scrollIntoView({behavior:'smooth'})} className="text-sm md:text-base font-bold text-gray-500 hover:text-gray-900 transition-colors relative group py-1">ì´ˆê³ ì† ì¸í„°ë„·/ì§€ë‹ˆTV<span className="absolute bottom-0 left-0 w-0 h-0.5 bg-red-600 transition-all duration-300 group-hover:w-full"></span></button>
                        {SITE_CONFIG.preOrder.isActive && (<button onClick={() => setShowPreOrderModal(true)} className="text-sm md:text-base font-bold text-red-500 hover:text-red-700 transition-colors relative group py-1">ì‚¬ì „ì˜ˆì•½<span className="absolute bottom-0 left-0 w-0 h-0.5 bg-red-600 transition-all duration-300 group-hover:w-full"></span></button>)}
                    </nav>
                </div>
              </header>

              {currentView === 'home' ? (
                <HomePage 
                   siteConfig={SITE_CONFIG}
                   plans={PLANS}
                   reviews={SITE_CONFIG.reviews} // FIXED: Passed explicitly from SITE_CONFIG
                   onProductClick={handleProductClick} 
                   showPreOrderModal={showPreOrderModal} 
                   setShowPreOrderModal={setShowPreOrderModal} 
                />
              ) : (
                <ProductDetailPage 
                    product={selectedProduct} 
                    plans={PLANS} 
                    siteConfig={SITE_CONFIG} 
                    onBack={handleBack} 
                />
              )}
               
              {showPreOrderModal && (
                <div className="fixed inset-0 z-[100] flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fade-in">
                  <div className="bg-white rounded-3xl p-8 max-w-lg w-full relative shadow-2xl animate-scale-up border-2 border-red-500 overflow-hidden">
                    <div className="absolute top-0 left-0 w-full h-2 bg-gradient-to-r from-red-500 to-purple-500"></div>
                    <div className="absolute -bottom-10 -right-10 w-40 h-40 bg-red-50 rounded-full blur-2xl"></div>
                    <button onClick={() => setShowPreOrderModal(false)} className="absolute top-4 right-4 text-gray-400 hover:text-gray-600 p-2 hover:bg-gray-100 rounded-full transition"><IconX size={24} /></button>
                    <div className="text-center mb-8 relative z-10"><span className="bg-red-100 text-red-600 text-xs font-bold px-3 py-1 rounded-full mb-3 inline-block animate-pulse">{SITE_CONFIG.preOrder.badge}</span><h2 className="text-3xl font-extrabold text-gray-900 mb-2">{SITE_CONFIG.preOrder.title}</h2><p className="text-gray-500 text-sm" dangerouslySetInnerHTML={{ __html: SITE_CONFIG.preOrder.description }}></p></div>
                    <form onSubmit={handlePreOrderSubmit} className="space-y-4 relative z-10">
                      <div className="space-y-2">
                        <p className="text-sm font-bold text-gray-700">ê´€ì‹¬ ëª¨ë¸ ì„ íƒ</p>
                        <div className="grid grid-cols-2 gap-2">{SITE_CONFIG.preOrder.models.map((model) => (<label key={model} className="border rounded-xl p-3 text-center cursor-pointer text-sm font-medium transition border-gray-200 hover:bg-gray-50"><input type="radio" name="preOrderModel" value={model} className="mr-2" checked={preOrderForm.model === model} onChange={(e) => setPreOrderForm({...preOrderForm, model: e.target.value})}/>{model}</label>))}</div>
                      </div>
                      <div className="pt-2 space-y-3">
                        <input type="text" placeholder="ì´ë¦„" className="w-full bg-gray-50 border border-gray-200 rounded-xl p-4 text-gray-900 focus:border-red-500 outline-none transition-colors" required value={preOrderForm.name} onChange={(e) => setPreOrderForm({...preOrderForm, name: e.target.value})}/>
                        {/* [ìˆ˜ì •] ì—°ë½ì²˜ ìë™ í•˜ì´í”ˆ ì ìš© */}
                        <input type="tel" placeholder="ì•Œë¦¼ ë°›ì„ ì—°ë½ì²˜ (010-0000-0000)" maxLength="13" className="w-full bg-gray-50 border border-gray-200 rounded-xl p-4 text-gray-900 focus:border-red-500 outline-none transition-colors" required value={preOrderForm.phone} onChange={(e) => setPreOrderForm({...preOrderForm, phone: formatPhoneNumber(e.target.value)})}/>
                      </div>
                      <button type="submit" className="w-full bg-slate-900 text-white py-4 rounded-xl font-bold text-lg hover:bg-slate-800 transition shadow-lg">ì•Œë¦¼ ì‹ ì²­í•˜ê¸°</button>
                    </form>
                  </div>
                </div>
              )}

              <div className="fixed bottom-6 right-6 z-40 flex flex-col gap-3">
                 {showConsult && (
                   <div className="bg-white p-4 rounded-xl shadow-2xl border border-gray-100 w-64 animate-fade-in-up mb-2 relative">
                      <button onClick={() => setShowConsult(false)} className="absolute top-2 right-2 text-gray-300 hover:text-gray-500"><IconX size={16}/></button>
                      <div className="font-bold text-gray-900 mb-1">ë¬´ì—‡ì„ ë„ì™€ë“œë¦´ê¹Œìš”?</div>
                      <p className="text-xs text-gray-500 mb-3">ì „ë¬¸ ìƒë‹´ì‚¬ê°€ ìµœì ì˜ ìš”ê¸ˆì œë¥¼ ì°¾ì•„ë“œë¦½ë‹ˆë‹¤.</p>
                      <a href={SITE_CONFIG.info.kakaoUrl} target="_blank" rel="noreferrer" className="w-full bg-yellow-300 text-black text-sm font-bold py-2 rounded flex items-center justify-center gap-1 hover:bg-yellow-400 cursor-pointer"><IconMessage size={16}/> ì¹´ì¹´ì˜¤í†¡ ìƒë‹´</a>
                   </div>
                 )}
                 <button onClick={() => setShowConsult(!showConsult)} className="bg-red-600 text-white w-14 h-14 rounded-full shadow-xl flex items-center justify-center hover:bg-red-700 hover:scale-105 transition duration-300"><IconPhone size={24} /></button>
              </div>

              <footer className="bg-gray-100 border-t border-gray-200 pt-12 pb-8">
                <div className="max-w-7xl mx-auto px-4">
                  <div className="flex flex-col items-start text-left mb-6 text-xs text-gray-600">
                      <div className="w-full">
                          <h5 className="font-bold text-gray-900 mb-4 text-sm">ì‚¬ì—…ì ì •ë³´</h5>
                          <p className="font-bold mb-1">{SITE_CONFIG.info.companyName}</p>
                          <p className="mb-1">ëŒ€í‘œì: {SITE_CONFIG.info.representative} | ì‚¬ì—…ìë“±ë¡ë²ˆí˜¸: {SITE_CONFIG.info.businessNumber}</p>
                          <p className="mb-1">ì£¼ì†Œ: {SITE_CONFIG.info.address}</p>
                          <p className="mb-1">í†µì‹ íŒë§¤ì—…ì‹ ê³ : {SITE_CONFIG.info.telecomNumber} | ê°œì¸ì •ë³´ê´€ë¦¬ì±…ì„ì: {SITE_CONFIG.info.privacyManager}</p>
                      </div>
                  </div>
                  <div className="bg-white p-6 rounded-2xl border border-gray-200 shadow-sm mb-8 w-full md:w-auto md:inline-block">
                      <div className="flex flex-wrap items-center gap-6 justify-center md:justify-start">
                          {SITE_CONFIG.info.kaitLogoHtml && (<div className="flex items-center" dangerouslySetInnerHTML={{ __html: SITE_CONFIG.info.kaitLogoHtml }}></div>)}
                          <div className="w-px h-8 bg-gray-200 hidden md:block"></div>
                          <a href={SITE_CONFIG.info.ftcLink} target="_blank" rel="noreferrer"><img src={SITE_CONFIG.info.ftcLogo} alt="ê³µì •ê±°ë˜ìœ„ì›íšŒ" className="h-10 md:h-12 object-contain hover:opacity-80 transition-opacity" /></a>
                      </div>
                  </div>
                  <div className="border-t border-gray-200 pt-8 text-center text-xs text-gray-400">COPYRIGHT Â© KT GAURI. ALL RIGHTS RESERVED.</div>
                </div>
              </footer>
            </div>
          );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>

